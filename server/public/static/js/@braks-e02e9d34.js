var Xi=Object.defineProperty,Yi=Object.defineProperties;var Gi=Object.getOwnPropertyDescriptors;var bt=Object.getOwnPropertySymbols;var Qn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable;var Kn=(e,t,n)=>t in e?Xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))Qn.call(t,n)&&Kn(e,n,t[n]);if(bt)for(var n of bt(t))jn.call(t,n)&&Kn(e,n,t[n]);return e},ee=(e,t)=>Yi(e,Gi(t));var ln=(e,t)=>{var n={};for(var o in e)Qn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&bt)for(var o of bt(e))t.indexOf(o)<0&&jn.call(e,o)&&(n[o]=e[o]);return n};import{d as le,r as te,p as We,h as oe,i as qe,g as Xo,o as Wi,c as Q,a as qi,b as $e,u as Ki,e as G,f as K,j as ce,w as Ee,F as we,k as Ae,l as ne,m as Z,n as Qi,t as b,q as ge,s as me,v as Re,x as ve,y as se,z as re,A as Yo,B as mt,C as ji,D as Ji,E as er,G as tr,H as It,I as nr,J as Dt,K as Ze,L as Qt,M as pn,N as or,O as On,P as ir,Q as Go,R as Wo,S as rr,T as lr,U as ar}from"./@vue-a5898d8d.js";var Jn;const qo=typeof window!="undefined",sr=e=>typeof e!="undefined",at=e=>typeof e=="function",ur=e=>typeof e=="string",an=()=>{};qo&&((Jn=window==null?void 0:window.navigator)==null?void 0:Jn.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Fe(e){return typeof e=="function"?e():Z(e)}function cr(e,t){function n(...o){e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})}return n}const Ko=e=>e();function dr(e=Ko){const t=te(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:t,pause:n,resume:o,eventFilter:(...r)=>{t.value&&e(...r)}}}function eo(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function fr(e){return e}function At(e,t){let n,o,i;const r=te(!0),l=()=>{r.value=!0,i()};re(e,l,{flush:"sync"});const a=at(t)?t:t.get,s=at(t)?void 0:t.set,u=Yo((d,h)=>(o=d,i=h,{get(){return r.value&&(n=a(),r.value=!1),o(),n},set(v){s==null||s(v)}}));return Object.isExtensible(u)&&(u.trigger=l),u}function F(){const e=[],t=i=>{const r=e.indexOf(i);r!==-1&&e.splice(r,1)};return{on:i=>(e.push(i),{off:()=>t(i)}),off:t,trigger:i=>{e.forEach(r=>r(i))}}}function pt(e){return Xo()?(Wi(e),!0):!1}function Qo(e,t=!0){mt()?$e(e):t?e():Ze(e)}function yn(e,t=!1){function n(h,{flush:v="sync",deep:w=!1,timeout:c,throwOnTimeout:g}={}){let m=null;const T=[new Promise(S=>{m=re(e,p=>{h(p)!==t&&(m==null||m(),S(p))},{flush:v,deep:w,immediate:!0})})];return c!=null&&T.push(eo(c,g).then(()=>Fe(e)).finally(()=>m==null?void 0:m())),Promise.race(T)}function o(h,v){if(!rr(h))return n(p=>p===h,v);const{flush:w="sync",deep:c=!1,timeout:g,throwOnTimeout:m}=v!=null?v:{};let y=null;const S=[new Promise(p=>{y=re([e,h],([C,M])=>{t!==(C===M)&&(y==null||y(),p(C))},{flush:w,deep:c,immediate:!0})})];return g!=null&&S.push(eo(g,m).then(()=>Fe(e)).finally(()=>(y==null||y(),Fe(e)))),Promise.race(S)}function i(h){return n(v=>Boolean(v),h)}function r(h){return o(null,h)}function l(h){return o(void 0,h)}function a(h){return n(Number.isNaN,h)}function s(h,v){return n(w=>{const c=Array.from(w);return c.includes(h)||c.includes(Fe(h))},v)}function u(h){return d(1,h)}function d(h=1,v){let w=-1;return n(()=>(w+=1,w>=h),v)}return Array.isArray(Fe(e))?{toMatch:n,toContains:s,changed:u,changedTimes:d,get not(){return yn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:a,toBeUndefined:l,changed:u,changedTimes:d,get not(){return yn(e,!t)}}}function st(e){return yn(e)}var to=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,gr=(e,t)=>{var n={};for(var o in e)hr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&to)for(var o of to(e))t.indexOf(o)<0&&vr.call(e,o)&&(n[o]=e[o]);return n};function mr(e,t,n={}){const o=n,{eventFilter:i=Ko}=o,r=gr(o,["eventFilter"]);return re(e,cr(i,t),r)}var pr=Object.defineProperty,yr=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,no=(e,t,n)=>t in e?pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_r=(e,t)=>{for(var n in t||(t={}))jo.call(t,n)&&no(e,n,t[n]);if(Rt)for(var n of Rt(t))Jo.call(t,n)&&no(e,n,t[n]);return e},xr=(e,t)=>yr(e,wr(t)),br=(e,t)=>{var n={};for(var o in e)jo.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Rt)for(var o of Rt(e))t.indexOf(o)<0&&Jo.call(e,o)&&(n[o]=e[o]);return n};function Ve(e,t,n={}){const o=n,{eventFilter:i}=o,r=br(o,["eventFilter"]),{eventFilter:l,pause:a,resume:s,isActive:u}=dr(i);return{stop:mr(e,t,xr(_r({},r),{eventFilter:l})),pause:a,resume:s,isActive:u}}function ei(e){var t;const n=Fe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Bn=qo?window:void 0;function Oe(...e){let t,n,o,i;if(ur(e[0])?([n,o,i]=e,t=Bn):[t,n,o,i]=e,!t)return an;let r=an;const l=re(()=>ei(t),s=>{r(),s&&(s.addEventListener(n,o,i),r=()=>{s.removeEventListener(n,o,i),r=an})},{immediate:!0,flush:"post"}),a=()=>{l(),r()};return pt(a),a}const Nr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function oo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Bn,eventName:r="keydown",passive:l=!1}=o,a=Nr(t);return Oe(i,r,u=>{a(u)&&n(u)},l)}function ti(e,t=null){const n=mt();let o=()=>{};const i=Yo((r,l)=>(o=l,{get(){var a,s;return r(),(s=(a=n==null?void 0:n.proxy)==null?void 0:a.$refs[e])!=null?s:t},set(){}}));return Qo(o),nr(o),i}function Er(e,t=!1){const n=te(),o=()=>n.value=Boolean(e());return o(),Qo(o,t),n}function Sr(e){return JSON.parse(JSON.stringify(e))}const wn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_n="__vueuse_ssr_handlers__";wn[_n]=wn[_n]||{};wn[_n];var io=Object.getOwnPropertySymbols,Mr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,$r=(e,t)=>{var n={};for(var o in e)Mr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&io)for(var o of io(e))t.indexOf(o)<0&&kr.call(e,o)&&(n[o]=e[o]);return n};function Cr(e,t,n={}){const o=n,{window:i=Bn}=o,r=$r(o,["window"]);let l;const a=Er(()=>i&&"ResizeObserver"in i),s=()=>{l&&(l.disconnect(),l=void 0)},u=re(()=>ei(e),h=>{s(),a.value&&i&&h&&(l=new ResizeObserver(t),l.observe(h,r))},{immediate:!0,flush:"post"}),d=()=>{s(),u()};return pt(d),{isSupported:a,stop:d}}var ro;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(ro||(ro={}));var zr=Object.defineProperty,lo=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable,ao=(e,t,n)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pr=(e,t)=>{for(var n in t||(t={}))Or.call(t,n)&&ao(e,n,t[n]);if(lo)for(var n of lo(t))Br.call(t,n)&&ao(e,n,t[n]);return e};const Tr={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Pr({linear:fr},Tr);function zt(e,t,n,o={}){var i,r,l;const{clone:a=!1,passive:s=!1,eventName:u,deep:d=!1,defaultValue:h}=o,v=mt(),w=n||(v==null?void 0:v.emit)||((i=v==null?void 0:v.$emit)==null?void 0:i.bind(v))||((l=(r=v==null?void 0:v.proxy)==null?void 0:r.$emit)==null?void 0:l.bind(v==null?void 0:v.proxy));let c=u;t||(t="modelValue"),c=u||c||`update:${t.toString()}`;const g=y=>a?at(a)?a(y):Sr(y):y,m=()=>sr(e[t])?g(e[t]):h;if(s){const y=m(),T=te(y);return re(()=>e[t],S=>T.value=g(S)),re(T,S=>{(S!==e[t]||d)&&w(c,S)},{deep:d}),T}else return Q({get(){return m()},set(y){w(c,y)}})}var Ir={value:()=>{}};function jt(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ot(n)}function Ot(e){this._=e}function Dr(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ot.prototype=jt.prototype={constructor:Ot,on:function(e,t){var n=this._,o=Dr(e+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(e=o[r]).type)&&(i=Ar(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<l;)if(i=(e=o[r]).type)n[i]=so(n[i],e.name,t);else if(t==null)for(i in n)n[i]=so(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ot(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Ar(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function so(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Ir,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var xn="http://www.w3.org/1999/xhtml",uo={svg:"http://www.w3.org/2000/svg",xhtml:xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),uo.hasOwnProperty(t)?{space:uo[t],local:e}:e}function Rr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xn&&t.documentElement.namespaceURI===xn?t.createElement(e):t.createElementNS(n,e)}}function Hr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ni(e){var t=Jt(e);return(t.local?Hr:Rr)(t)}function Vr(){}function Pn(e){return e==null?Vr:function(){return this.querySelector(e)}}function Lr(e){typeof e!="function"&&(e=Pn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=new Array(l),s,u,d=0;d<l;++d)(s=r[d])&&(u=e.call(s,s.__data__,d,r))&&("__data__"in s&&(u.__data__=s.__data__),a[d]=u);return new he(o,this._parents)}function Fr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Zr(){return[]}function oi(e){return e==null?Zr:function(){return this.querySelectorAll(e)}}function Ur(e){return function(){return Fr(e.apply(this,arguments))}}function Xr(e){typeof e=="function"?e=Ur(e):e=oi(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var l=t[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(o.push(e.call(s,s.__data__,u,l)),i.push(s));return new he(o,i)}function ii(e){return function(){return this.matches(e)}}function ri(e){return function(t){return t.matches(e)}}var Yr=Array.prototype.find;function Gr(e){return function(){return Yr.call(this.children,e)}}function Wr(){return this.firstElementChild}function qr(e){return this.select(e==null?Wr:Gr(typeof e=="function"?e:ri(e)))}var Kr=Array.prototype.filter;function Qr(){return Array.from(this.children)}function jr(e){return function(){return Kr.call(this.children,e)}}function Jr(e){return this.selectAll(e==null?Qr:jr(typeof e=="function"?e:ri(e)))}function el(e){typeof e!="function"&&(e=ii(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new he(o,this._parents)}function li(e){return new Array(e.length)}function tl(){return new he(this._enter||this._groups.map(li),this._parents)}function Ht(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ht.prototype={constructor:Ht,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nl(e){return function(){return e}}function ol(e,t,n,o,i,r){for(var l=0,a,s=t.length,u=r.length;l<u;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new Ht(e,r[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function il(e,t,n,o,i,r,l){var a,s,u=new Map,d=t.length,h=r.length,v=new Array(d),w;for(a=0;a<d;++a)(s=t[a])&&(v[a]=w=l.call(s,s.__data__,a,t)+"",u.has(w)?i[a]=s:u.set(w,s));for(a=0;a<h;++a)w=l.call(e,r[a],a,r)+"",(s=u.get(w))?(o[a]=s,s.__data__=r[a],u.delete(w)):n[a]=new Ht(e,r[a]);for(a=0;a<d;++a)(s=t[a])&&u.get(v[a])===s&&(i[a]=s)}function rl(e){return e.__data__}function ll(e,t){if(!arguments.length)return Array.from(this,rl);var n=t?il:ol,o=this._parents,i=this._groups;typeof e!="function"&&(e=nl(e));for(var r=i.length,l=new Array(r),a=new Array(r),s=new Array(r),u=0;u<r;++u){var d=o[u],h=i[u],v=h.length,w=al(e.call(d,d&&d.__data__,u,o)),c=w.length,g=a[u]=new Array(c),m=l[u]=new Array(c),y=s[u]=new Array(v);n(d,h,g,m,y,w,t);for(var T=0,S=0,p,C;T<c;++T)if(p=g[T]){for(T>=S&&(S=T+1);!(C=m[S])&&++S<c;);p._next=C||null}}return l=new he(l,o),l._enter=a,l._exit=s,l}function al(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sl(){return new he(this._exit||this._groups.map(li),this._parents)}function ul(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function cl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,l=Math.min(i,r),a=new Array(i),s=0;s<l;++s)for(var u=n[s],d=o[s],h=u.length,v=a[s]=new Array(h),w,c=0;c<h;++c)(w=u[c]||d[c])&&(v[c]=w);for(;s<i;++s)a[s]=n[s];return new he(a,this._parents)}function dl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function fl(e){e||(e=hl);function t(h,v){return h&&v?e(h.__data__,v.__data__):!h-!v}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],a=l.length,s=i[r]=new Array(a),u,d=0;d<a;++d)(u=l[d])&&(s[d]=u);s.sort(t)}return new he(i,this._parents).order()}function hl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gl(){return Array.from(this)}function ml(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function pl(){let e=0;for(const t of this)++e;return e}function yl(){return!this.node()}function wl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,l=i.length,a;r<l;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function _l(e){return function(){this.removeAttribute(e)}}function xl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bl(e,t){return function(){this.setAttribute(e,t)}}function Nl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function El(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Sl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ml(e,t){var n=Jt(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?xl:_l:typeof t=="function"?n.local?Sl:El:n.local?Nl:bl)(n,t))}function ai(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kl(e){return function(){this.style.removeProperty(e)}}function $l(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Cl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function zl(e,t,n){return arguments.length>1?this.each((t==null?kl:typeof t=="function"?Cl:$l)(e,t,n==null?"":n)):Ke(this.node(),e)}function Ke(e,t){return e.style.getPropertyValue(t)||ai(e).getComputedStyle(e,null).getPropertyValue(t)}function Ol(e){return function(){delete this[e]}}function Bl(e,t){return function(){this[e]=t}}function Pl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Tl(e,t){return arguments.length>1?this.each((t==null?Ol:typeof t=="function"?Pl:Bl)(e,t)):this.node()[e]}function si(e){return e.trim().split(/^|\s+/)}function Tn(e){return e.classList||new ui(e)}function ui(e){this._node=e,this._names=si(e.getAttribute("class")||"")}ui.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ci(e,t){for(var n=Tn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function di(e,t){for(var n=Tn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Il(e){return function(){ci(this,e)}}function Dl(e){return function(){di(this,e)}}function Al(e,t){return function(){(t.apply(this,arguments)?ci:di)(this,e)}}function Rl(e,t){var n=si(e+"");if(arguments.length<2){for(var o=Tn(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Al:t?Il:Dl)(n,t))}function Hl(){this.textContent=""}function Vl(e){return function(){this.textContent=e}}function Ll(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Fl(e){return arguments.length?this.each(e==null?Hl:(typeof e=="function"?Ll:Vl)(e)):this.node().textContent}function Zl(){this.innerHTML=""}function Ul(e){return function(){this.innerHTML=e}}function Xl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Yl(e){return arguments.length?this.each(e==null?Zl:(typeof e=="function"?Xl:Ul)(e)):this.node().innerHTML}function Gl(){this.nextSibling&&this.parentNode.appendChild(this)}function Wl(){return this.each(Gl)}function ql(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kl(){return this.each(ql)}function Ql(e){var t=typeof e=="function"?e:ni(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jl(){return null}function Jl(e,t){var n=typeof e=="function"?e:ni(e),o=t==null?jl:typeof t=="function"?t:Pn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function ea(){var e=this.parentNode;e&&e.removeChild(this)}function ta(){return this.each(ea)}function na(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oa(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ia(e){return this.select(e?oa:na)}function ra(e){return arguments.length?this.property("__data__",e):this.node().__data__}function la(e){return function(t){e.call(this,t,this.__data__)}}function aa(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function sa(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function ua(e,t,n){return function(){var o=this.__on,i,r=la(t);if(o){for(var l=0,a=o.length;l<a;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function ca(e,t,n){var o=aa(e+""),i,r=o.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,d;s<u;++s)for(i=0,d=a[s];i<r;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(a=t?ua:sa,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function fi(e,t,n){var o=ai(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function da(e,t){return function(){return fi(this,e,t)}}function fa(e,t){return function(){return fi(this,e,t.apply(this,arguments))}}function ha(e,t){return this.each((typeof t=="function"?fa:da)(e,t))}function*va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var hi=[null];function he(e,t){this._groups=e,this._parents=t}function yt(){return new he([[document.documentElement]],hi)}function ga(){return this}he.prototype=yt.prototype={constructor:he,select:Lr,selectAll:Xr,selectChild:qr,selectChildren:Jr,filter:el,data:ll,enter:tl,exit:sl,join:ul,merge:cl,selection:ga,order:dl,sort:fl,call:vl,nodes:gl,node:ml,size:pl,empty:yl,each:wl,attr:Ml,style:zl,property:Tl,classed:Rl,text:Fl,html:Yl,raise:Wl,lower:Kl,append:Ql,insert:Jl,remove:ta,clone:ia,datum:ra,on:ca,dispatch:ha,[Symbol.iterator]:va};function pe(e){return typeof e=="string"?new he([[document.querySelector(e)]],[document.documentElement]):new he([[e]],hi)}function ma(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ne(e,t){if(e=ma(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const pa={passive:!1},ut={capture:!0,passive:!1};function sn(e){e.stopImmediatePropagation()}function Xe(e){e.preventDefault(),e.stopImmediatePropagation()}function vi(e){var t=e.document.documentElement,n=pe(e).on("dragstart.drag",Xe,ut);"onselectstart"in t?n.on("selectstart.drag",Xe,ut):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gi(e,t){var n=e.document.documentElement,o=pe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Xe,ut),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Nt=e=>()=>e;function bn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:l,y:a,dx:s,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}bn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ya(e){return!e.ctrlKey&&!e.button}function wa(){return this.parentNode}function _a(e,t){return t==null?{x:e.x,y:e.y}:t}function xa(){return navigator.maxTouchPoints||"ontouchstart"in this}function ba(){var e=ya,t=wa,n=_a,o=xa,i={},r=jt("start","drag","end"),l=0,a,s,u,d,h=0;function v(p){p.on("mousedown.drag",w).filter(o).on("touchstart.drag",m).on("touchmove.drag",y,pa).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(p,C){if(!(d||!e.call(this,p,C))){var M=S(this,t.call(this,p,C),p,C,"mouse");!M||(pe(p.view).on("mousemove.drag",c,ut).on("mouseup.drag",g,ut),vi(p.view),sn(p),u=!1,a=p.clientX,s=p.clientY,M("start",p))}}function c(p){if(Xe(p),!u){var C=p.clientX-a,M=p.clientY-s;u=C*C+M*M>h}i.mouse("drag",p)}function g(p){pe(p.view).on("mousemove.drag mouseup.drag",null),gi(p.view,u),Xe(p),i.mouse("end",p)}function m(p,C){if(!!e.call(this,p,C)){var M=p.changedTouches,P=t.call(this,p,C),I=M.length,L,W;for(L=0;L<I;++L)(W=S(this,P,p,C,M[L].identifier,M[L]))&&(sn(p),W("start",p,M[L]))}}function y(p){var C=p.changedTouches,M=C.length,P,I;for(P=0;P<M;++P)(I=i[C[P].identifier])&&(Xe(p),I("drag",p,C[P]))}function T(p){var C=p.changedTouches,M=C.length,P,I;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),P=0;P<M;++P)(I=i[C[P].identifier])&&(sn(p),I("end",p,C[P]))}function S(p,C,M,P,I,L){var W=r.copy(),U=Ne(L||M,C),q,D,f;if((f=n.call(p,new bn("beforestart",{sourceEvent:M,target:v,identifier:I,active:l,x:U[0],y:U[1],dx:0,dy:0,dispatch:W}),P))!=null)return q=f.x-U[0]||0,D=f.y-U[1]||0,function E(_,z,H){var V=U,O;switch(_){case"start":i[I]=E,O=l++;break;case"end":delete i[I],--l;case"drag":U=Ne(H||z,C),O=l;break}W.call(_,p,new bn(_,{sourceEvent:z,subject:f,target:v,identifier:I,active:O,x:U[0]+q,y:U[1]+D,dx:U[0]-V[0],dy:U[1]-V[1],dispatch:W}),P)}}return v.filter=function(p){return arguments.length?(e=typeof p=="function"?p:Nt(!!p),v):e},v.container=function(p){return arguments.length?(t=typeof p=="function"?p:Nt(p),v):t},v.subject=function(p){return arguments.length?(n=typeof p=="function"?p:Nt(p),v):n},v.touchable=function(p){return arguments.length?(o=typeof p=="function"?p:Nt(!!p),v):o},v.on=function(){var p=r.on.apply(r,arguments);return p===r?v:p},v.clickDistance=function(p){return arguments.length?(h=(p=+p)*p,v):Math.sqrt(h)},v}function In(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mi(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function wt(){}var ct=.7,Vt=1/ct,Ye="\\s*([+-]?\\d+)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Na=/^#([0-9a-f]{3,8})$/,Ea=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Sa=new RegExp(`^rgb\\(${Se},${Se},${Se}\\)$`),Ma=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${dt}\\)$`),ka=new RegExp(`^rgba\\(${Se},${Se},${Se},${dt}\\)$`),$a=new RegExp(`^hsl\\(${dt},${Se},${Se}\\)$`),Ca=new RegExp(`^hsla\\(${dt},${Se},${Se},${dt}\\)$`),co={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};In(wt,ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fo,formatHex:fo,formatHex8:za,formatHsl:Oa,formatRgb:ho,toString:ho});function fo(){return this.rgb().formatHex()}function za(){return this.rgb().formatHex8()}function Oa(){return pi(this).formatHsl()}function ho(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Na.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vo(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Et(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Et(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ea.exec(e))?new fe(t[1],t[2],t[3],1):(t=Sa.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ma.exec(e))?Et(t[1],t[2],t[3],t[4]):(t=ka.exec(e))?Et(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$a.exec(e))?po(t[1],t[2]/100,t[3]/100,1):(t=Ca.exec(e))?po(t[1],t[2]/100,t[3]/100,t[4]):co.hasOwnProperty(e)?vo(co[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function vo(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function Et(e,t,n,o){return o<=0&&(e=t=n=NaN),new fe(e,t,n,o)}function Ba(e){return e instanceof wt||(e=ft(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function Nn(e,t,n,o){return arguments.length===1?Ba(e):new fe(e,t,n,o==null?1:o)}function fe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}In(fe,Nn,mi(wt,{brighter(e){return e=e==null?Vt:Math.pow(Vt,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ct:Math.pow(ct,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(De(this.r),De(this.g),De(this.b),Lt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:go,formatHex:go,formatHex8:Pa,formatRgb:mo,toString:mo}));function go(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}`}function Pa(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}${Te((isNaN(this.opacity)?1:this.opacity)*255)}`}function mo(){const e=Lt(this.opacity);return`${e===1?"rgb(":"rgba("}${De(this.r)}, ${De(this.g)}, ${De(this.b)}${e===1?")":`, ${e})`}`}function Lt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function De(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Te(e){return e=De(e),(e<16?"0":"")+e.toString(16)}function po(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ye(e,t,n,o)}function pi(e){if(e instanceof ye)return new ye(e.h,e.s,e.l,e.opacity);if(e instanceof wt||(e=ft(e)),!e)return new ye;if(e instanceof ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),l=NaN,a=r-i,s=(r+i)/2;return a?(t===r?l=(n-o)/a+(n<o)*6:n===r?l=(o-t)/a+2:l=(t-n)/a+4,a/=s<.5?r+i:2-r-i,l*=60):a=s>0&&s<1?0:l,new ye(l,a,s,e.opacity)}function Ta(e,t,n,o){return arguments.length===1?pi(e):new ye(e,t,n,o==null?1:o)}function ye(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}In(ye,Ta,mi(wt,{brighter(e){return e=e==null?Vt:Math.pow(Vt,e),new ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ct:Math.pow(ct,e),new ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new fe(un(e>=240?e-240:e+120,i,o),un(e,i,o),un(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ye(yo(this.h),St(this.s),St(this.l),Lt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lt(this.opacity);return`${e===1?"hsl(":"hsla("}${yo(this.h)}, ${St(this.s)*100}%, ${St(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yo(e){return e=(e||0)%360,e<0?e+360:e}function St(e){return Math.max(0,Math.min(1,e||0))}function un(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var yi=e=>()=>e;function Ia(e,t){return function(n){return e+n*t}}function Da(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Aa(e){return(e=+e)==1?wi:function(t,n){return n-t?Da(t,n,e):yi(isNaN(t)?n:t)}}function wi(e,t){var n=t-e;return n?Ia(e,n):yi(isNaN(e)?t:e)}var wo=function e(t){var n=Aa(t);function o(i,r){var l=n((i=Nn(i)).r,(r=Nn(r)).r),a=n(i.g,r.g),s=n(i.b,r.b),u=wi(i.opacity,r.opacity);return function(d){return i.r=l(d),i.g=a(d),i.b=s(d),i.opacity=u(d),i+""}}return o.gamma=e,o}(1);function ze(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var En=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cn=new RegExp(En.source,"g");function Ra(e){return function(){return e}}function Ha(e){return function(t){return e(t)+""}}function Va(e,t){var n=En.lastIndex=cn.lastIndex=0,o,i,r,l=-1,a=[],s=[];for(e=e+"",t=t+"";(o=En.exec(e))&&(i=cn.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[l]?a[l]+=r:a[++l]=r),(o=o[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:ze(o,i)})),n=cn.lastIndex;return n<t.length&&(r=t.slice(n),a[l]?a[l]+=r:a[++l]=r),a.length<2?s[0]?Ha(s[0].x):Ra(t):(t=s.length,function(u){for(var d=0,h;d<t;++d)a[(h=s[d]).i]=h.x(u);return a.join("")})}var _o=180/Math.PI,Sn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _i(e,t,n,o,i,r){var l,a,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,s/=a),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*_o,skewX:Math.atan(s)*_o,scaleX:l,scaleY:a}}var Mt;function La(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Sn:_i(t.a,t.b,t.c,t.d,t.e,t.f)}function Fa(e){return e==null||(Mt||(Mt=document.createElementNS("http://www.w3.org/2000/svg","g")),Mt.setAttribute("transform",e),!(e=Mt.transform.baseVal.consolidate()))?Sn:(e=e.matrix,_i(e.a,e.b,e.c,e.d,e.e,e.f))}function xi(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,d,h,v,w,c){if(u!==h||d!==v){var g=w.push("translate(",null,t,null,n);c.push({i:g-4,x:ze(u,h)},{i:g-2,x:ze(d,v)})}else(h||v)&&w.push("translate("+h+t+v+n)}function l(u,d,h,v){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),v.push({i:h.push(i(h)+"rotate(",null,o)-2,x:ze(u,d)})):d&&h.push(i(h)+"rotate("+d+o)}function a(u,d,h,v){u!==d?v.push({i:h.push(i(h)+"skewX(",null,o)-2,x:ze(u,d)}):d&&h.push(i(h)+"skewX("+d+o)}function s(u,d,h,v,w,c){if(u!==h||d!==v){var g=w.push(i(w)+"scale(",null,",",null,")");c.push({i:g-4,x:ze(u,h)},{i:g-2,x:ze(d,v)})}else(h!==1||v!==1)&&w.push(i(w)+"scale("+h+","+v+")")}return function(u,d){var h=[],v=[];return u=e(u),d=e(d),r(u.translateX,u.translateY,d.translateX,d.translateY,h,v),l(u.rotate,d.rotate,h,v),a(u.skewX,d.skewX,h,v),s(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,v),u=d=null,function(w){for(var c=-1,g=v.length,m;++c<g;)h[(m=v[c]).i]=m.x(w);return h.join("")}}}var Za=xi(La,"px, ","px)","deg)"),Ua=xi(Fa,", ",")",")"),Xa=1e-12;function xo(e){return((e=Math.exp(e))+1/e)/2}function Ya(e){return((e=Math.exp(e))-1/e)/2}function Ga(e){return((e=Math.exp(2*e))-1)/(e+1)}var Wa=function e(t,n,o){function i(r,l){var a=r[0],s=r[1],u=r[2],d=l[0],h=l[1],v=l[2],w=d-a,c=h-s,g=w*w+c*c,m,y;if(g<Xa)y=Math.log(v/u)/t,m=function(P){return[a+P*w,s+P*c,u*Math.exp(t*P*y)]};else{var T=Math.sqrt(g),S=(v*v-u*u+o*g)/(2*u*n*T),p=(v*v-u*u-o*g)/(2*v*n*T),C=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(p*p+1)-p);y=(M-C)/t,m=function(P){var I=P*y,L=xo(C),W=u/(n*T)*(L*Ga(t*I+C)-Ya(C));return[a+W*w,s+W*c,u*L/xo(t*I+C)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(r){var l=Math.max(.001,+r),a=l*l,s=a*a;return e(l,a,s)},i}(Math.SQRT2,2,4),Qe=0,it=0,nt=0,bi=1e3,Ft,rt,Zt=0,He=0,en=0,ht=typeof performance=="object"&&performance.now?performance:Date,Ni=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dn(){return He||(Ni(qa),He=ht.now()+en)}function qa(){He=0}function Ut(){this._call=this._time=this._next=null}Ut.prototype=Ei.prototype={constructor:Ut,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Dn():+n)+(t==null?0:+t),!this._next&&rt!==this&&(rt?rt._next=this:Ft=this,rt=this),this._call=e,this._time=n,Mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mn())}};function Ei(e,t,n){var o=new Ut;return o.restart(e,t,n),o}function Ka(){Dn(),++Qe;for(var e=Ft,t;e;)(t=He-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qe}function bo(){He=(Zt=ht.now())+en,Qe=it=0;try{Ka()}finally{Qe=0,ja(),He=0}}function Qa(){var e=ht.now(),t=e-Zt;t>bi&&(en-=t,Zt=e)}function ja(){for(var e,t=Ft,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ft=n);rt=e,Mn(o)}function Mn(e){if(!Qe){it&&(it=clearTimeout(it));var t=e-He;t>24?(e<1/0&&(it=setTimeout(bo,e-ht.now()-en)),nt&&(nt=clearInterval(nt))):(nt||(Zt=ht.now(),nt=setInterval(Qa,bi)),Qe=1,Ni(bo))}}function No(e,t,n){var o=new Ut;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Ja=jt("start","end","cancel","interrupt"),es=[],Si=0,Eo=1,kn=2,Bt=3,So=4,$n=5,Pt=6;function tn(e,t,n,o,i,r){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;ts(e,n,{name:t,index:o,group:i,on:Ja,tween:es,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Si})}function An(e,t){var n=_e(e,t);if(n.state>Si)throw new Error("too late; already scheduled");return n}function Me(e,t){var n=_e(e,t);if(n.state>Bt)throw new Error("too late; already running");return n}function _e(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ts(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Ei(r,0,n.time);function r(u){n.state=Eo,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var d,h,v,w;if(n.state!==Eo)return s();for(d in o)if(w=o[d],w.name===n.name){if(w.state===Bt)return No(l);w.state===So?(w.state=Pt,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete o[d]):+d<t&&(w.state=Pt,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete o[d])}if(No(function(){n.state===Bt&&(n.state=So,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=kn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kn){for(n.state=Bt,i=new Array(v=n.tween.length),d=0,h=-1;d<v;++d)(w=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=w);i.length=h+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=$n,1),h=-1,v=i.length;++h<v;)i[h].call(e,d);n.state===$n&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Pt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Tt(e,t){var n=e.__transition,o,i,r=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){r=!1;continue}i=o.state>kn&&o.state<$n,o.state=Pt,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}r&&delete e.__transition}}function ns(e){return this.each(function(){Tt(this,e)})}function os(e,t){var n,o;return function(){var i=Me(this,e),r=i.tween;if(r!==n){o=n=r;for(var l=0,a=o.length;l<a;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function is(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Me(this,e),l=r.tween;if(l!==o){i=(o=l).slice();for(var a={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=a;break}s===u&&i.push(a)}r.tween=i}}function rs(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=_e(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?os:is)(n,e,t))}function Rn(e,t,n){var o=e._id;return e.each(function(){var i=Me(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return _e(i,o).value[t]}}function Mi(e,t){var n;return(typeof t=="number"?ze:t instanceof ft?wo:(n=ft(t))?(t=n,wo):Va)(e,t)}function ls(e){return function(){this.removeAttribute(e)}}function as(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ss(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}}function us(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}function cs(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function ds(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function fs(e,t){var n=Jt(e),o=n==="transform"?Ua:Mi;return this.attrTween(e,typeof t=="function"?(n.local?ds:cs)(n,o,Rn(this,"attr."+e,t)):t==null?(n.local?as:ls)(n):(n.local?us:ss)(n,o,t))}function hs(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function vs(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gs(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&vs(e,r)),n}return i._value=t,i}function ms(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&hs(e,r)),n}return i._value=t,i}function ps(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Jt(e);return this.tween(n,(o.local?gs:ms)(o,t))}function ys(e,t){return function(){An(this,e).delay=+t.apply(this,arguments)}}function ws(e,t){return t=+t,function(){An(this,e).delay=t}}function _s(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ys:ws)(t,e)):_e(this.node(),t).delay}function xs(e,t){return function(){Me(this,e).duration=+t.apply(this,arguments)}}function bs(e,t){return t=+t,function(){Me(this,e).duration=t}}function Ns(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xs:bs)(t,e)):_e(this.node(),t).duration}function Es(e,t){if(typeof t!="function")throw new Error;return function(){Me(this,e).ease=t}}function Ss(e){var t=this._id;return arguments.length?this.each(Es(t,e)):_e(this.node(),t).ease}function Ms(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Me(this,e).ease=n}}function ks(e){if(typeof e!="function")throw new Error;return this.each(Ms(this._id,e))}function $s(e){typeof e!="function"&&(e=ii(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new Ce(o,this._parents,this._name,this._id)}function Cs(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),l=new Array(o),a=0;a<r;++a)for(var s=t[a],u=n[a],d=s.length,h=l[a]=new Array(d),v,w=0;w<d;++w)(v=s[w]||u[w])&&(h[w]=v);for(;a<o;++a)l[a]=t[a];return new Ce(l,this._parents,this._name,this._id)}function zs(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Os(e,t,n){var o,i,r=zs(t)?An:Me;return function(){var l=r(this,e),a=l.on;a!==o&&(i=(o=a).copy()).on(t,n),l.on=i}}function Bs(e,t){var n=this._id;return arguments.length<2?_e(this.node(),n).on.on(e):this.each(Os(n,e,t))}function Ps(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ts(){return this.on("end.remove",Ps(this._id))}function Is(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pn(e));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var a=o[l],s=a.length,u=r[l]=new Array(s),d,h,v=0;v<s;++v)(d=a[v])&&(h=e.call(d,d.__data__,v,a))&&("__data__"in d&&(h.__data__=d.__data__),u[v]=h,tn(u[v],t,n,v,u,_e(d,n)));return new Ce(r,this._parents,t,n)}function Ds(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oi(e));for(var o=this._groups,i=o.length,r=[],l=[],a=0;a<i;++a)for(var s=o[a],u=s.length,d,h=0;h<u;++h)if(d=s[h]){for(var v=e.call(d,d.__data__,h,s),w,c=_e(d,n),g=0,m=v.length;g<m;++g)(w=v[g])&&tn(w,t,n,g,v,c);r.push(v),l.push(d)}return new Ce(r,l,t,n)}var As=yt.prototype.constructor;function Rs(){return new As(this._groups,this._parents)}function Hs(e,t){var n,o,i;return function(){var r=Ke(this,e),l=(this.style.removeProperty(e),Ke(this,e));return r===l?null:r===n&&l===o?i:i=t(n=r,o=l)}}function ki(e){return function(){this.style.removeProperty(e)}}function Vs(e,t,n){var o,i=n+"",r;return function(){var l=Ke(this,e);return l===i?null:l===o?r:r=t(o=l,n)}}function Ls(e,t,n){var o,i,r;return function(){var l=Ke(this,e),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(e),Ke(this,e))),l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a))}}function Fs(e,t){var n,o,i,r="style."+t,l="end."+r,a;return function(){var s=Me(this,e),u=s.on,d=s.value[r]==null?a||(a=ki(t)):void 0;(u!==n||i!==d)&&(o=(n=u).copy()).on(l,i=d),s.on=o}}function Zs(e,t,n){var o=(e+="")=="transform"?Za:Mi;return t==null?this.styleTween(e,Hs(e,o)).on("end.style."+e,ki(e)):typeof t=="function"?this.styleTween(e,Ls(e,o,Rn(this,"style."+e,t))).each(Fs(this._id,e)):this.styleTween(e,Vs(e,o,t),n).on("end.style."+e,null)}function Us(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Xs(e,t,n){var o,i;function r(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Us(e,l,n)),o}return r._value=t,r}function Ys(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Xs(e,t,n==null?"":n))}function Gs(e){return function(){this.textContent=e}}function Ws(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function qs(e){return this.tween("text",typeof e=="function"?Ws(Rn(this,"text",e)):Gs(e==null?"":e+""))}function Ks(e){return function(t){this.textContent=e.call(this,t)}}function Qs(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ks(i)),t}return o._value=e,o}function js(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qs(e))}function Js(){for(var e=this._name,t=this._id,n=$i(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var d=_e(s,t);tn(s,e,n,u,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ce(o,this._parents,e,n)}function eu(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var a={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var u=Me(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),u.on=t}),i===0&&r()})}var tu=0;function Ce(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function $i(){return++tu}var ke=yt.prototype;Ce.prototype={constructor:Ce,select:Is,selectAll:Ds,selectChild:ke.selectChild,selectChildren:ke.selectChildren,filter:$s,merge:Cs,selection:Rs,transition:Js,call:ke.call,nodes:ke.nodes,node:ke.node,size:ke.size,empty:ke.empty,each:ke.each,on:Bs,attr:fs,attrTween:ps,style:Zs,styleTween:Ys,text:qs,textTween:js,remove:Ts,tween:rs,delay:_s,duration:Ns,ease:Ss,easeVarying:ks,end:eu,[Symbol.iterator]:ke[Symbol.iterator]};function nu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ou={time:null,delay:0,duration:250,ease:nu};function iu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ru(e){var t,n;e instanceof Ce?(t=e._id,e=e._name):(t=$i(),(n=ou).time=Dn(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&tn(s,e,t,u,l,n||iu(s,t));return new Ce(o,this._parents,e,t)}yt.prototype.interrupt=ns;yt.prototype.transition=ru;var kt=e=>()=>e;function lu(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Pe(e,t,n){this.k=e,this.x=t,this.y=n}Pe.prototype={constructor:Pe,scale:function(e){return e===1?this:new Pe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nn=new Pe(1,0,0);function dn(e){e.stopImmediatePropagation()}function ot(e){e.preventDefault(),e.stopImmediatePropagation()}function au(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function su(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Mo(){return this.__zoom||nn}function uu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cu(){return navigator.maxTouchPoints||"ontouchstart"in this}function du(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l))}function fu(){var e=au,t=su,n=du,o=uu,i=cu,r=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],a=250,s=Wa,u=jt("start","zoom","end"),d,h,v,w=500,c=150,g=0,m=10;function y(f){f.property("__zoom",Mo).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",W).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(f,E,_,z){var H=f.selection?f.selection():f;H.property("__zoom",Mo),f!==H?C(f,E,_,z):H.interrupt().each(function(){M(this,arguments).event(z).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},y.scaleBy=function(f,E,_,z){y.scaleTo(f,function(){var H=this.__zoom.k,V=typeof E=="function"?E.apply(this,arguments):E;return H*V},_,z)},y.scaleTo=function(f,E,_,z){y.transform(f,function(){var H=t.apply(this,arguments),V=this.__zoom,O=_==null?p(H):typeof _=="function"?_.apply(this,arguments):_,X=V.invert(O),j=typeof E=="function"?E.apply(this,arguments):E;return n(S(T(V,j),O,X),H,l)},_,z)},y.translateBy=function(f,E,_,z){y.transform(f,function(){return n(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),l)},null,z)},y.translateTo=function(f,E,_,z,H){y.transform(f,function(){var V=t.apply(this,arguments),O=this.__zoom,X=z==null?p(V):typeof z=="function"?z.apply(this,arguments):z;return n(nn.translate(X[0],X[1]).scale(O.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof _=="function"?-_.apply(this,arguments):-_),V,l)},z,H)};function T(f,E){return E=Math.max(r[0],Math.min(r[1],E)),E===f.k?f:new Pe(E,f.x,f.y)}function S(f,E,_){var z=E[0]-_[0]*f.k,H=E[1]-_[1]*f.k;return z===f.x&&H===f.y?f:new Pe(f.k,z,H)}function p(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function C(f,E,_,z){f.on("start.zoom",function(){M(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(z).end()}).tween("zoom",function(){var H=this,V=arguments,O=M(H,V).event(z),X=t.apply(H,V),j=_==null?p(X):typeof _=="function"?_.apply(H,V):_,x=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),N=H.__zoom,k=typeof E=="function"?E.apply(H,V):E,B=s(N.invert(j).concat(x/N.k),k.invert(j).concat(x/k.k));return function($){if($===1)$=k;else{var R=B($),J=x/R[2];$=new Pe(J,j[0]-R[0]*J,j[1]-R[1]*J)}O.zoom(null,$)}})}function M(f,E,_){return!_&&f.__zooming||new P(f,E)}function P(f,E){this.that=f,this.args=E,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,E),this.taps=0}P.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,E){return this.mouse&&f!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var E=pe(this.that).datum();u.call(f,this.that,new lu(f,{sourceEvent:this.sourceEvent,target:y,type:f,transform:this.that.__zoom,dispatch:u}),E)}};function I(f,...E){if(!e.apply(this,arguments))return;var _=M(this,E).event(f),z=this.__zoom,H=Math.max(r[0],Math.min(r[1],z.k*Math.pow(2,o.apply(this,arguments)))),V=Ne(f);if(_.wheel)(_.mouse[0][0]!==V[0]||_.mouse[0][1]!==V[1])&&(_.mouse[1]=z.invert(_.mouse[0]=V)),clearTimeout(_.wheel);else{if(z.k===H)return;_.mouse=[V,z.invert(V)],Tt(this),_.start()}ot(f),_.wheel=setTimeout(O,c),_.zoom("mouse",n(S(T(z,H),_.mouse[0],_.mouse[1]),_.extent,l));function O(){_.wheel=null,_.end()}}function L(f,...E){if(v||!e.apply(this,arguments))return;var _=f.currentTarget,z=M(this,E,!0).event(f),H=pe(f.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",x,!0),V=Ne(f,_),O=f.clientX,X=f.clientY;vi(f.view),dn(f),z.mouse=[V,this.__zoom.invert(V)],Tt(this),z.start();function j(N){if(ot(N),!z.moved){var k=N.clientX-O,B=N.clientY-X;z.moved=k*k+B*B>g}z.event(N).zoom("mouse",n(S(z.that.__zoom,z.mouse[0]=Ne(N,_),z.mouse[1]),z.extent,l))}function x(N){H.on("mousemove.zoom mouseup.zoom",null),gi(N.view,z.moved),ot(N),z.event(N).end()}}function W(f,...E){if(!!e.apply(this,arguments)){var _=this.__zoom,z=Ne(f.changedTouches?f.changedTouches[0]:f,this),H=_.invert(z),V=_.k*(f.shiftKey?.5:2),O=n(S(T(_,V),z,H),t.apply(this,E),l);ot(f),a>0?pe(this).transition().duration(a).call(C,O,z,f):pe(this).call(y.transform,O,z,f)}}function U(f,...E){if(!!e.apply(this,arguments)){var _=f.touches,z=_.length,H=M(this,E,f.changedTouches.length===z).event(f),V,O,X,j;for(dn(f),O=0;O<z;++O)X=_[O],j=Ne(X,this),j=[j,this.__zoom.invert(j),X.identifier],H.touch0?!H.touch1&&H.touch0[2]!==j[2]&&(H.touch1=j,H.taps=0):(H.touch0=j,V=!0,H.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(H.taps<2&&(h=j[0],d=setTimeout(function(){d=null},w)),Tt(this),H.start())}}function q(f,...E){if(!!this.__zooming){var _=M(this,E).event(f),z=f.changedTouches,H=z.length,V,O,X,j;for(ot(f),V=0;V<H;++V)O=z[V],X=Ne(O,this),_.touch0&&_.touch0[2]===O.identifier?_.touch0[0]=X:_.touch1&&_.touch1[2]===O.identifier&&(_.touch1[0]=X);if(O=_.that.__zoom,_.touch1){var x=_.touch0[0],N=_.touch0[1],k=_.touch1[0],B=_.touch1[1],$=($=k[0]-x[0])*$+($=k[1]-x[1])*$,R=(R=B[0]-N[0])*R+(R=B[1]-N[1])*R;O=T(O,Math.sqrt($/R)),X=[(x[0]+k[0])/2,(x[1]+k[1])/2],j=[(N[0]+B[0])/2,(N[1]+B[1])/2]}else if(_.touch0)X=_.touch0[0],j=_.touch0[1];else return;_.zoom("touch",n(S(O,X,j),_.extent,l))}}function D(f,...E){if(!!this.__zooming){var _=M(this,E).event(f),z=f.changedTouches,H=z.length,V,O;for(dn(f),v&&clearTimeout(v),v=setTimeout(function(){v=null},w),V=0;V<H;++V)O=z[V],_.touch0&&_.touch0[2]===O.identifier?delete _.touch0:_.touch1&&_.touch1[2]===O.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(O=Ne(O,this),Math.hypot(h[0]-O[0],h[1]-O[1])<m)){var X=pe(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return y.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:kt(+f),y):o},y.filter=function(f){return arguments.length?(e=typeof f=="function"?f:kt(!!f),y):e},y.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:kt(!!f),y):i},y.extent=function(f){return arguments.length?(t=typeof f=="function"?f:kt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),y):t},y.scaleExtent=function(f){return arguments.length?(r[0]=+f[0],r[1]=+f[1],y):[r[0],r[1]]},y.translateExtent=function(f){return arguments.length?(l[0][0]=+f[0][0],l[1][0]=+f[1][0],l[0][1]=+f[0][1],l[1][1]=+f[1][1],y):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},y.constrain=function(f){return arguments.length?(n=f,y):n},y.duration=function(f){return arguments.length?(a=+f,y):a},y.interpolate=function(f){return arguments.length?(s=f,y):s},y.on=function(){var f=u.on.apply(u,arguments);return f===u?y:f},y.clickDistance=function(f){return arguments.length?(g=(f=+f)*f,y):Math.sqrt(g)},y.tapDistance=function(f){return arguments.length?(m=+f,y):m},y}var Y=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Y||{}),Ge=(e=>(e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Ge||{}),je=(e=>(e.Strict="strict",e.Loose="loose",e))(je||{}),Xt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Xt||{});const ko=Symbol("vueFlow"),Ci=Symbol("nodeId"),zi=Symbol("nodeRef"),hu=Symbol("edgeId"),vu=Symbol("edgeRef"),on=Symbol("slots"),gu=()=>({edgesChange:F(),nodesChange:F(),nodeDoubleClick:F(),nodeClick:F(),nodeMouseEnter:F(),nodeMouseMove:F(),nodeMouseLeave:F(),nodeContextMenu:F(),nodeDragStart:F(),nodeDrag:F(),nodeDragStop:F(),miniMapNodeClick:F(),miniMapNodeDoubleClick:F(),miniMapNodeMouseEnter:F(),miniMapNodeMouseMove:F(),miniMapNodeMouseLeave:F(),connect:F(),connectStart:F(),connectEnd:F(),paneReady:F(),move:F(),moveStart:F(),moveEnd:F(),selectionDragStart:F(),selectionDrag:F(),selectionDragStop:F(),selectionContextMenu:F(),paneScroll:F(),paneClick:F(),paneContextMenu:F(),paneMouseEnter:F(),paneMouseMove:F(),paneMouseLeave:F(),edgeContextMenu:F(),edgeMouseEnter:F(),edgeMouseMove:F(),edgeMouseLeave:F(),edgeDoubleClick:F(),edgeClick:F(),edgeUpdateStart:F(),edgeUpdate:F(),edgeUpdateEnd:F(),updateNodeInternals:F()});var mu=(e,t)=>{ji(()=>{for(const[n,o]of Object.entries(t.value)){const i=r=>{e(n,r)};o.on(i),pt(()=>{o.off(i)})}})};const vt=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Hn=(e,t)=>({x:Yt(e.x,t[0][0],t[1][0]),y:Yt(e.y,t[0][1],t[1][1])}),$o=e=>{const t=e.getRootNode(),n=tt();return"elementFromPoint"in t?t:n.document},_t=e=>e&&"id"in e&&"source"in e&&"target"in e,gt=e=>_t(e)&&"sourceNode"in e&&"targetNode"in e,Oi=e=>e&&"id"in e&&!_t(e),Be=e=>Oi(e)&&"computedPosition"in e,pu=(e,t,n)=>{var o;let i=n;return Be(e)||(i=A({type:(o=e.type)!=null?o:"default",dimensions:pn({width:0,height:0}),handleBounds:Dt({source:[],target:[]}),computedPosition:pn(A({z:0},e.position)),draggable:void 0,selectable:void 0,connectable:void 0},n)),ee(A(A({},i),e),{id:e.id.toString()})},Bi=(e,t)=>(t=gt(e)?t:A({sourceHandle:e.sourceHandle?e.sourceHandle.toString():void 0,targetHandle:e.targetHandle?e.targetHandle.toString():void 0,type:e.type,source:e.source.toString(),target:e.target.toString(),z:0,sourceX:0,sourceY:0,targetX:0,targetY:0,updatable:e.updatable,selectable:e.selectable,data:e.data},t),Object.assign({id:e.id.toString()},e,t)),Pi=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`,Ti=(e,t)=>t.some(n=>_t(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Vn=({x:e,y:t},{x:n,y:o,zoom:i},r,[l,a])=>{const s={x:(e-n)/i,y:(t-o)/i};return r?{x:l*Math.round(s.x/l),y:a*Math.round(s.y/a)}:s},Ii=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Je=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Di=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),yu=(e,t)=>Di(Ii(Je(e),Je(t))),Ln=e=>{const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>Ii(n,Je(A(A({},o),i))),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Di(t)},Ai=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},r=!1)=>{const l=Je({x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter(a=>{if(!a||a.selectable===!1)return!1;const{computedPosition:s={x:0,y:0},dimensions:u={width:0,height:0}}=a,d=Je(A(A({},s),u)),h=Math.max(0,Math.min(l.x2,d.x2)-Math.max(l.x,d.x)),v=Math.max(0,Math.min(l.y2,d.y2)-Math.max(l.y,d.y)),w=Math.ceil(h*v),c=typeof u.width=="undefined"||typeof u.height=="undefined"||u.width===0||u.height===0,g=r&&w>0,m=u.width*u.height;return c||g||w>=m})},de=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},Co=(e,t,n,o,i,r=.1,l={x:0,y:0})=>{var a,s;const u=t/(e.width*(1+r)),d=n/(e.height*(1+r)),h=Math.min(u,d),v=Yt(h,o,i),w=e.x+e.width/2,c=e.y+e.height/2,g=t/2-w*v+((a=l.x)!=null?a:0),m=n/2-c*v+((s=l.y)!=null?s:0);return{x:g,y:m,zoom:v}},wu=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:e.z>t.z?e.z:t.z}),Ri=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Ri(n,t):!1},Ie=e=>typeof e=="undefined"?"":typeof e=="string"?e:Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&"),zo=(e,t,n)=>{var o,i,r,l;const a=((o=n==null?void 0:n.x)!=null?o:0)+t.x,s=((i=n==null?void 0:n.y)!=null?i:0)+t.y,u=(r=n==null?void 0:n.width)!=null?r:t.width,d=(l=n==null?void 0:n.height)!=null?l:t.height;switch(e){case Y.Top:return{x:a+u/2,y:s};case Y.Right:return{x:a+u,y:s+d/2};case Y.Bottom:return{x:a+u/2,y:s+d};case Y.Left:return{x:a,y:s+d/2}}},Oo=(e=[],t)=>{if(!e.length)return;let n;return!t&&e.length===1?n=e[0]:t&&(n=e.find(o=>o.id===t)),n||e[0]},_u=(e,t,n,o,i,r)=>{const l=zo(n,A(A({},e.dimensions),e.computedPosition),t),a=zo(r,A(A({},o.dimensions),o.computedPosition),i);return{sourceX:l.x,sourceY:l.y,targetX:a.x,targetY:a.y}};function xu({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:l,height:a,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Je({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:l/s.zoom,height:a/s.zoom}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),v=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*v)>0}const bu=(e,t)=>{let n=-1;const o=e.reduce((i,r)=>{const l=t(r.source),a=t(r.target);if(!l||!a)return i;const s=r.z?r.z:Math.max(l.computedPosition.z||0,a.computedPosition.z||0);return i[s]?i[s].push(r):i[s]=[r],n=s>n?s:n,i},{});return Object.entries(Object.keys(o).length?o:{0:[]}).map(([i,r])=>{const l=+i;return{edges:r,level:l,isMaxLevel:l===n}})},Bo=(e,t,n)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return;const i=Array.from(o),r=t.getBoundingClientRect();return i.map(l=>{const a=l.getBoundingClientRect();return A({id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(a.left-r.left)/n,y:(a.top-r.top)/n},vt(l))})},Hi=(e,t,n,o,i)=>{i.value=!1,e.selected?e.selected&&t&&o({nodes:[e]}):n([e])};function Po(e,t){var n,o;if(t){const i=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(i>0||r>0||e.position.x<0||e.position.y<0){if(t.style=A({},t.style),t.style.width=(n=t.style.width)!=null?n:t.dimensions.width,t.style.height=(o=t.style.height)!=null?o:t.dimensions.height,i>0)if(typeof t.style.width=="string"){const l=parseInt(t.style.width,10);t.style.width=`${l+i}px`}else t.style.width+=i;if(r>0)if(typeof t.style.height=="string"){const l=parseInt(t.style.height,10);t.style.height=`${l+r}px`}else t.style.height+=r;if(e.position.x<0){const l=Math.abs(e.position.x);if(t.position.x=t.position.x-l,typeof t.style.width=="string"){const a=parseInt(t.style.width,10);t.style.width=`${a+l}px`}else t.style.width+=l;e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);if(t.position.y=t.position.y-l,typeof t.style.height=="string"){const a=parseInt(t.style.height,10);t.style.height=`${a+l}px`}else t.style.height+=l;e.position.y=0}}}}const To=(e,t)=>{let n=t.map(o=>o.id);return e.forEach(o=>{if(o.type==="add"){const l=o.item;return t.push(l)}const i=n.indexOf(o.id),r=t[i];switch(o.type){case"select":(Be(r)||gt(r))&&(r.selected=o.selected);break;case"position":if(Be(r)&&(typeof o.position!="undefined"&&(r.position=o.position),typeof o.computedPosition!="undefined"&&(r.computedPosition=A(A({},r.computedPosition),o.computedPosition)),r.expandParent&&r.parentNode)){const l=t[n.indexOf(r.parentNode)];l&&Be(l)&&Po(r,l)}break;case"dimensions":if(Be(r)&&(typeof o.dimensions!="undefined"&&(r.dimensions=o.dimensions),r.expandParent&&r.parentNode)){const l=t[n.indexOf(r.parentNode)];l&&Be(l)&&Po(r,l)}break;case"remove":n.includes(o.id)&&(t.splice(i,1),n=t.map(l=>l.id));break}}),t},Gt=(e,t)=>({id:e,type:"select",selected:t}),Io=e=>({item:e,type:"add"}),fn=e=>({id:e,type:"remove"}),Do=(e,t)=>e.reduce((n,o)=>{const i=t.includes(o.id);return!o.selected&&i?(o.selected=!0,n.push(Gt(o.id,!0))):o.selected&&!i&&(o.selected=!1,n.push(Gt(o.id,!1))),n},[]),Nu=e=>typeof e!="undefined",Eu=(e,t)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),!1;let n;return _t(e)?n=A({},e):n=ee(A({},e),{id:Pi(e)}),n=Bi(n),Ti(n,t)?!1:n},Su=(e,t,n)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),!1;const o=n.find(r=>gt(r)&&r.id===e.id);if(!o)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),!1;const i=ee(A({},e),{id:Pi(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle});return n.splice(n.indexOf(o),1,i),i},Ao=(e,t,n,o)=>{const i={},r=e.map(l=>{const a=Dt(pu(l,o,ee(A({},t(l.id)),{parentNode:l.parentNode})));return l.parentNode&&(i[l.parentNode]=!0),a});return r.forEach(l=>{const a=[...r,...n];if(l.parentNode&&!a.find(s=>s.id===l.parentNode)&&console.warn(`[vueflow]: Parent node ${l.parentNode} not found`),l.parentNode||i[l.id]){i[l.id]&&(l.isParent=!0);const s=l.parentNode?t(l.parentNode):void 0;s&&(s.isParent=!0)}}),r},Mu=["data-handleid","data-nodeid","data-handlepos"],ku={name:"Handle"},Wt=le(ee(A({},ku),{props:{id:null,type:{default:"source"},position:{default:()=>"top"},isValidConnection:null,connectable:{type:Boolean,default:!0}},setup(e){const t=ae(),n=b(t,"connectionStartHandle"),o=b(t,"connectionMode"),i=b(t,"vueFlowRef"),{id:r,node:l,nodeEl:a}=mc(),s=te(),u=Q(()=>{var g;return(g=e.id)!=null?g:o.value===je.Strict?null:`${r}__handle-${e.position}`}),{onMouseDown:d,onClick:h}=Zi(),v=g=>{d(g,u.value,r,e.type==="target",e.isValidConnection,void 0)},w=g=>{var m;h(g,(m=u.value)!=null?m:null,r,e.type,e.isValidConnection)},c=Q(()=>["vue-flow__handle",`vue-flow__handle-${e.position}`,`vue-flow__handle-${u.value}`,"nodrag",{source:e.type!=="target",target:e.type==="target",connectable:e.connectable,connecting:n.value&&n.value.nodeId===r&&n.value.handleId===u.value&&n.value.type===e.type}]);return $e(()=>{var g,m;const y=(g=l.handleBounds[e.type])==null?void 0:g.find(I=>I.id===u.value);if(!i.value||y)return;const T=i.value.querySelector(".vue-flow__transformationpane");if(!a||!s.value||!T)return;const S=a.value.getBoundingClientRect(),p=s.value.getBoundingClientRect(),C=window.getComputedStyle(T),{m22:M}=new window.DOMMatrixReadOnly(C.transform),P=A({id:u.value,position:e.position,x:(p.left-S.left)/M,y:(p.top-S.top)/M},vt(s.value));l.handleBounds[e.type]=[...(m=l.handleBounds[e.type])!=null?m:[],P]}),(g,m)=>(G(),K("div",{ref_key:"handle",ref:s,"data-handleid":u.value,"data-nodeid":Z(r),"data-handlepos":e.position,class:Re(Z(c)),onMousedown:v,onClick:w},[ne(g.$slots,"default",{id:e.id})],42,Mu))}})),Fn=function({sourcePosition:e=Y.Bottom,targetPosition:t=Y.Top,label:n,connectable:o=!1,isValidTargetPos:i,isValidSourcePos:r}){return[oe(Wt,{type:"target",position:t,isConnectable:o,isValidConnection:i}),typeof n!="string"&&n?oe(n):oe("div",{innerHTML:n}),oe(Wt,{type:"source",position:e,isConnectable:o,isValidConnection:r})]};Fn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Fn.inheritAttrs=!1;const Zn=function({sourcePosition:e=Y.Bottom,label:t,connectable:n=!1,isValidSourcePos:o}){return[typeof t!="string"&&t?oe(t):oe("div",{innerHTML:t}),oe(Wt,{type:"source",position:e,isConnectable:n,isValidConnection:o})]};Zn.props=["sourcePosition","label","isValidSourcePos","connectable"];Zn.inheritAttrs=!1;const Un=function({targetPosition:e=Y.Top,label:t,connectable:n=!1,isValidTargetPos:o}){return[oe(Wt,{type:"target",position:e,isConnectable:n,isValidConnection:o}),typeof t!="string"&&t?oe(t):oe("div",{innerHTML:t})]};Un.props=["targetPosition","label","isValidTargetPos","connectable"];Un.inheritAttrs=!1;const $u=["data-id"],Cu={name:"Node",inheritAttrs:!1},zu=le(ee(A({},Cu),{props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:{type:Boolean},snapGrid:null,type:{type:[null,Function,Object,Boolean]},name:null,node:null,resizeObserver:null},setup(e){const t=or(e,["id","type","name","draggable","selectable","connectable","snapGrid"]);We(Ci,e.id);const n=ae();b(n,"nodeExtent");const o=b(n,"edges");b(n,"viewport");const i=b(n,"noPanClassName"),r=b(n,"selectNodesOnDrag"),l=b(n,"nodesSelectionActive"),a=b(n,"multiSelectionActive"),s=b(n,"emits"),u=b(n,"getNode"),d=b(n,"removeSelectedElements"),h=b(n,"addSelectedNodes"),v=b(n,"updateNodeDimensions"),w=b(n,"onUpdateNodeInternals"),c=zt(t,"node"),g=Q(()=>c.value.parentNode?u.value(c.value.parentNode):void 0),m=te();We(zi,m);const{emit:y,on:T}=hc(c.value,s.value),S=Ui({id:e.id,el:m,disabled:Q(()=>!e.draggable),onStart(f,E,_){y.dragStart({event:f,node:E,nodes:_})},onDrag(f,E,_){y.drag({event:f,node:E,nodes:_})},onStop(f,E,_){y.dragStop({event:f,node:E,nodes:_})}}),p=(f,E)=>{E?c.value.computedPosition=wu({x:E.x,y:E.y,z:E.z},f):c.value.computedPosition=f},C=()=>{m.value&&v.value([{id:e.id,nodeElement:m.value,forceUpdate:!0}]),p({x:c.value.position.x,y:c.value.position.y,z:c.value.computedPosition.z?c.value.computedPosition.z:c.value.selected?1e3:0},g.value?A({},g.value.computedPosition):void 0)};w.value(f=>{f.includes(e.id)&&C()}),p({x:c.value.position.x,y:c.value.position.y,z:c.value.computedPosition.z?c.value.computedPosition.z:c.value.selected?1e3:0},g.value?A({},g.value.computedPosition):void 0),$e(()=>{t.resizeObserver.observe(m.value)}),re([()=>c.value.type,()=>c.value.sourcePosition,()=>c.value.targetPosition],()=>{v.value([{id:e.id,nodeElement:m.value,forceUpdate:!0}])},{flush:"post"}),re([()=>c.value.position.x,()=>c.value.position.y,()=>{var f;return(f=g.value)==null?void 0:f.computedPosition.x},()=>{var f;return(f=g.value)==null?void 0:f.computedPosition.y},()=>{var f;return(f=g.value)==null?void 0:f.computedPosition.z},()=>c.value.selected,()=>c.value.dimensions,()=>{var f;return(f=g.value)==null?void 0:f.dimensions}],([f,E,_,z,H])=>{const V={x:f,y:E,z:c.value.selected?1e3:0};p(V,_&&z?{x:_,y:z,z:H}:void 0)},{flush:"post"}),Qt(()=>{t.resizeObserver.unobserve(m.value)});const M=f=>{S!=null&&S.value||y.mouseEnter({event:f,node:c.value,connectedEdges:de([c.value],o.value)})},P=f=>{S!=null&&S.value||y.mouseMove({event:f,node:c.value,connectedEdges:de([c.value],o.value)})},I=f=>{S!=null&&S.value||y.mouseLeave({event:f,node:c.value,connectedEdges:de([c.value],o.value)})},L=f=>{y.contextMenu({event:f,node:c.value,connectedEdges:de([c.value],o.value)})},W=f=>{y.doubleClick({event:f,node:c.value,connectedEdges:de([c.value],o.value)})},U=f=>{e.selectable&&(!r.value||!e.draggable)&&Hi(c.value,a.value,h.value,d.value,l),y.click({event:f,node:c.value,connectedEdges:de([c.value],o.value)})},q=Q(()=>c.value.class instanceof Function?c.value.class(c.value):c.value.class),D=Q(()=>{const f=(c.value.style instanceof Function?c.value.style(c.value):c.value.style)||{},E=c.value.width instanceof Function?c.value.width(c.value):c.value.width,_=c.value.height instanceof Function?c.value.height(c.value):c.value.height;return E&&(f.width=typeof E=="string"?E:`${E}px`),_&&(f.height=typeof _=="string"?_:`${_}px`),f});return(f,E)=>{var _;return G(),K("div",{ref_key:"nodeElement",ref:m,class:Re(["vue-flow__node",[`vue-flow__node-${e.name}`,i.value,{dragging:Z(S),selected:c.value.selected,selectable:e.selectable},Z(q)]]),style:me(A({zIndex:(_=c.value.computedPosition.z)!=null?_:0,transform:`translate(${c.value.computedPosition.x}px,${c.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none"},Z(D))),"data-id":c.value.id,onMouseenter:M,onMousemove:P,onMouseleave:I,onContextmenu:L,onClick:U,onDblclick:W},[(G(),ge(On(e.type),{id:c.value.id,type:c.value.type,data:c.value.data,events:A(A({},c.value.events),Z(T)),selected:!!c.value.selected,connectable:e.connectable,position:c.value.position,dimensions:c.value.dimensions,"is-valid-target-pos":c.value.isValidTargetPos,"is-valid-source-pos":c.value.isValidSourcePos,"parent-node":c.value.parentNode,dragging:Z(S),"z-index":c.value.computedPosition.z,"target-position":c.value.targetPosition,"source-position":c.value.sourcePosition,label:c.value.label,"drag-handle":c.value.dragHandle,onUpdateNodeInternals:C},null,40,["id","type","data","events","selected","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","dragging","z-index","target-position","source-position","label","drag-handle"]))],46,$u)}}})),Ou=["transform"],Bu=["width","height","x","y","rx","ry"],Pu=["y"],Tu={name:"EdgeText"},Iu=le(ee(A({},Tu),{props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=te();let n=te({x:0,y:0,width:0,height:0});$e(()=>{n.value=t.value.getBBox()});const o=Q(()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`);return(i,r)=>(G(),K("g",{transform:Z(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(G(),K("rect",{key:0,class:"vue-flow__edge-textbg",width:`${n.value.width+2*e.labelBgPadding[0]}px`,height:`${n.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:me(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Bu)):se("",!0),ve("text",Go(i.$attrs,{ref_key:"el",ref:t,class:"vue-flow__edge-text",y:n.value.height/2,dy:"0.3em",style:e.labelStyle}),[ne(i.$slots,"default",{},()=>[typeof e.label!="string"&&typeof e.label?(G(),ge(On(e.label),{key:0})):(G(),K(we,{key:1},[lr(ar(e.label),1)],64))])],16,Pu)],8,Ou))}})),et=function({path:e,centerX:t,centerY:n,label:o,labelBgBorderRadius:i,labelBgPadding:r,labelBgStyle:l,labelShowBg:a,labelStyle:s,markerStart:u,markerEnd:d,style:h}){return[oe("path",{style:A({},h),d:e,class:"vue-flow__edge-path","marker-end":d,"marker-start":u}),o?oe(Iu,{x:t,y:n,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:r,labelBgBorderRadius:i}):null]};et.props=["path","centerX","centerY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","style"];et.inheritAttrs=!1;function $t(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qt({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let l,a;switch(e){case Y.Left:l=t-$t(t-o,r),a=n;break;case Y.Right:l=t+$t(o-t,r),a=n;break;case Y.Top:l=t,a=n-$t(n-i,r);break;case Y.Bottom:l=t,a=n+$t(i-n,r);break}return[l,a]}function Vi({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:i,targetPosition:r=Y.Top,curvature:l=.25}){const[a,s]=qt({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[u,d]=qt({pos:r,x1:o,y1:i,x2:e,y2:t,c:l});return`M${e},${t} C${a},${s} ${u},${d} ${o},${i}`}function Du({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:i,targetPosition:r=Y.Top,curvature:l=.25}){const[a,s]=qt({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[u,d]=qt({pos:r,x1:o,y1:i,x2:e,y2:t,c:l}),h=e*.125+a*.375+u*.375+o*.125,v=t*.125+s*.375+d*.375+i*.125,w=Math.abs(h-e),c=Math.abs(v-t);return[h,v,w,c]}function Kt({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,l;switch(e){case Y.Left:case Y.Right:r=.5*(t+o),l=n;break;case Y.Top:case Y.Bottom:r=t,l=.5*(n+i);break}return[r,l]}function Au({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:i,targetPosition:r=Y.Top}){const[l,a]=Kt({pos:n,x1:e,y1:t,x2:o,y2:i}),[s,u]=Kt({pos:r,x1:o,y1:i,x2:e,y2:t});return`M${e},${t} C${l},${a} ${s},${u} ${o},${i}`}function Ru({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:i,targetPosition:r=Y.Top}){const[l,a]=Kt({pos:n,x1:e,y1:t,x2:o,y2:i}),[s,u]=Kt({pos:r,x1:o,y1:i,x2:e,y2:t}),d=e*.125+l*.375+s*.375+o*.125,h=t*.125+a*.375+u*.375+i*.125,v=Math.abs(d-e),w=Math.abs(h-t);return[d,h,v,w]}const Ro=[Y.Left,Y.Right],Li=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:i=Y.Bottom,targetPosition:r=Y.Top})=>{const l=Ro.includes(i),a=Ro.includes(r);if(l&&!a||a&&!l){const w=l?Math.abs(n-e):0,c=e>n?e-w:e+w,g=l?0:Math.abs(o-t),m=t<o?t+g:t-g;return[c,m,w,g]}const u=Math.abs(n-e)/2,d=n<e?n+u:n-u,h=Math.abs(o-t)/2,v=o<t?o+h:o-h;return[d,v,u,h]},Ho={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},Hu=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Vo=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function Vu({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:o=Y.Top,center:i,offset:r}){const l=Ho[t],a=Ho[o],s={x:e.x+l.x*r,y:e.y+l.y*r},u={x:n.x+a.x*r,y:n.y+a.y*r},d=Hu({source:s,sourcePosition:t,target:u}),h=d.x!==0?"x":"y",v=d[h];let w=[];if(l[h]*a[h]===-1){const c=[{x:i.x,y:s.y},{x:i.x,y:u.y}],g=[{x:s.x,y:i.y},{x:u.x,y:i.y}];l[h]===v?w=h==="x"?c:g:w=h==="x"?g:c}else{const c=[{x:s.x,y:u.y}],g=[{x:u.x,y:s.y}];if(h==="x"?w=l.x===v?g:c:w=l.y===v?c:g,t!==o){const m=h==="x"?"y":"x",y=l[h]===a[m],T=s[m]>u[m],S=s[m]<u[m];(l[h]===1&&(!y&&T||y&&S)||l[h]!==1&&(!y&&S||y&&T))&&(w=h==="x"?c:g)}}return[e,s,...w,u,n]}function Lu(e,t,n,o){const i=Math.min(Vo(e,t)/2,Vo(t,n)/2,o),{x:r,y:l}=t;if(e.x===r&&r===n.x||e.y===l&&l===n.y)return`L${r} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${r+i*u},${l}Q ${r},${l} ${r},${l+i*d}`}const a=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${r},${l+i*s}Q ${r},${l} ${r+i*a},${l}`}function Cn({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:o,targetY:i,targetPosition:r=Y.Top,borderRadius:l=5,centerX:a,centerY:s,offset:u=20}){const[d,h]=Li({sourceX:e,sourceY:t,targetX:o,targetY:i}),c=Vu({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:r,center:{x:typeof a!="undefined"?a:d,y:typeof s!="undefined"?s:h},offset:u});return c.reduce((g,m,y)=>{let T="";return y>0&&y<c.length-1?T=Lu(c[y-1],m,c[y+1],l):T=`${y===0?"M":"L"}${m.x} ${m.y}`,g+=T,g},"")}const Xn=function({sourcePosition:e=Y.Bottom,targetPosition:t=Y.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:r={},labelBgPadding:l,labelBgBorderRadius:a,sourceY:s,sourceX:u,targetX:d,targetY:h,curvature:v,markerEnd:w,markerStart:c,style:g}){const[m,y]=Du({sourceX:u,sourceY:s,targetX:d,targetY:h,sourcePosition:e,targetPosition:t,curvature:v}),T=Vi({sourceX:u,sourceY:s,targetX:d,targetY:h,sourcePosition:e,targetPosition:t,curvature:v});return oe(et,{path:T,centerX:m,centerY:y,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:r,labelBgPadding:l,labelBgBorderRadius:a,style:g,markerEnd:w,markerStart:c})};Xn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","style"];Xn.inheritAttrs=!1;const Yn=function({sourcePosition:e=Y.Bottom,targetPosition:t=Y.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:r={},labelBgPadding:l,labelBgBorderRadius:a,sourceY:s,sourceX:u,targetX:d,targetY:h,markerEnd:v,markerStart:w,style:c}){const[g,m]=Ru({sourceX:u,sourceY:s,targetX:d,targetY:h,sourcePosition:e,targetPosition:t}),y=Au({sourceX:u,sourceY:s,targetX:d,targetY:h,sourcePosition:e,targetPosition:t});return oe(et,{path:y,centerX:g,centerY:m,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:r,labelBgPadding:l,labelBgBorderRadius:a,style:c,markerEnd:v,markerStart:w})};Yn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];Yn.inheritAttrs=!1;const rn=function({sourcePosition:e=Y.Bottom,targetPosition:t=Y.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:r={},labelBgPadding:l,labelBgBorderRadius:a,sourceY:s,sourceX:u,targetX:d,targetY:h,markerEnd:v,markerStart:w,borderRadius:c,offset:g,style:m}){const[y,T]=Li({sourceX:u,sourceY:s,targetX:d,targetY:h,sourcePosition:e,targetPosition:t}),S=Cn({sourceX:u,sourceY:s,targetX:d,targetY:h,sourcePosition:e,targetPosition:t,borderRadius:c,offset:g});return oe(et,{path:S,centerX:y,centerY:T,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:r,labelBgPadding:l,labelBgBorderRadius:a,style:m,markerEnd:v,markerStart:w})};rn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","offset","markerEnd","markerStart","style"];rn.inheritAttrs=!1;const Gn=function(e){return oe(rn,ee(A({},e),{borderRadius:0}))};Gn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];Gn.inheritAttrs=!1;const Wn=function({label:e,labelStyle:t={},labelShowBg:n=!0,labelBgStyle:o={},labelBgPadding:i,labelBgBorderRadius:r,sourceY:l,sourceX:a,targetX:s,targetY:u,markerEnd:d,markerStart:h,style:v}){const w=Q(()=>{const g=Math.abs(u-l)/2;return u<l?u+g:u-g}),c=Q(()=>{const g=Math.abs(s-a)/2;return s<a?s+g:s-g});return oe(et,{path:`M ${a},${l}L ${s},${u}`,centerX:c.value,centerY:w.value,label:e,labelStyle:t,labelShowBg:n,labelBgStyle:o,labelBgPadding:i,labelBgBorderRadius:r,style:v,markerEnd:d,markerStart:h})};Wn.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];Wn.inheritAttrs=!1;const Fu=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Zu=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,zn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=Y.Top}){const i=Q(()=>{const l=Fu(t,e,o);return isNaN(l)?0:l}),r=Q(()=>{const l=Zu(n,e,o);return isNaN(l)?0:l});return oe("circle",{class:"vue-flow__edgeupdater",cx:i.value,cy:r.value,r:e,stroke:"transparent",fill:"transparent"})};zn.props=["radius","centerX","centerY","position"];const Uu=le({props:["name","type","id","data","events","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelStyle","labelShowBg","style","animated","label","updatable","selectable","target","source","sourceNode","targetNode","sourceHandleId","targetHandleId","selected","markerEnd","markerStart","connectionMode","edgeUpdaterRadius","updating"],emits:["source-mousedown","target-mousedown"],setup(e,{emit:t}){let n=te(!1);const o=te();We(hu,e.id),We(vu,o);const i=()=>n.value=!0,r=()=>n.value=!1,l=s=>{t("source-mousedown",s)},a=s=>{t("target-mousedown",s)};return()=>{var s,u;if(!e.sourceNode||!e.targetNode)return null;let d;e.connectionMode===je.Strict?d=e.sourceNode.handleBounds.source:d=(s=e.sourceNode.handleBounds.source)!=null?s:e.sourceNode.handleBounds.target;const h=Oo(d,e.sourceHandleId);let v;e.connectionMode===je.Strict?v=e.targetNode.handleBounds.target:v=(u=e.targetNode.handleBounds.target)!=null?u:e.targetNode.handleBounds.source;const w=Oo(v,e.targetHandleId),c=h?h.position:Y.Bottom,g=w?w.position:Y.Top,{sourceX:m,sourceY:y,targetY:T,targetX:S}=_u(e.sourceNode,h,c,e.targetNode,w,g);return oe("g",{ref:o,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.name}`,{updating:n.value,selected:e.selected,animated:e.animated,inactive:!e.selectable}]},[e.updating?null:oe(e.type,{id:e.id,sourceNode:e.sourceNode,targetNode:e.targetNode,source:e.source,target:e.target,updatable:e.updatable,selected:e.selected,animated:e.animated,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,data:e.data,events:e.events,style:e.style,markerStart:`url(#${Ie(e.markerStart)})`,markerEnd:`url(#${Ie(e.markerEnd)})`,sourcePosition:c,targetPosition:g,sourceX:m,sourceY:y,targetX:S,targetY:T,sourceHandleId:e.sourceHandleId,targetHandleId:e.targetHandleId}),[e.updatable==="source"||e.updatable===!0?[oe("g",{onMousedown:l,onMouseenter:i,onMouseout:r},oe(zn,{position:c,centerX:m,centerY:y,radius:e.edgeUpdaterRadius,"data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[oe("g",{onMousedown:a,onMouseenter:i,onMouseout:r},oe(zn,{position:g,centerX:S,centerY:T,radius:e.edgeUpdaterRadius,"data-type":"target"}))]:null]])}}}),Xu={class:"vue-flow__connection"},Yu=["d","marker-end","marker-start"],Gu={name:"ConnectionLine"},Wu=le(ee(A({},Gu),{props:{sourceNode:null},setup(e){var t,n,o;const i=ae(),r=b(i,"getNodes"),l=b(i,"connectionStartHandle"),a=b(i,"connectionPosition"),s=b(i,"connectionLineType"),u=b(i,"connectionLineStyle"),d=b(i,"connectionLineOptions"),h=b(i,"viewport"),v=(t=qe(on))==null?void 0:t["connection-line"],w=v==null?void 0:v({}),c=l.value.handleId;l.value.nodeId;const g=l.value.type,m=c&&g?(n=e.sourceNode.handleBounds[g])==null?void 0:n.find(W=>W.id===c):g&&((o=e.sourceNode.handleBounds[g!=null?g:"source"])==null?void 0:o[0]),y=m?m.x+m.width/2:e.sourceNode.dimensions.width/2,T=m?m.y+m.height/2:e.sourceNode.dimensions.height,S=e.sourceNode.computedPosition.x+y,p=e.sourceNode.computedPosition.y+T,M=(m==null?void 0:m.position)===Y.Left||(m==null?void 0:m.position)===Y.Right?Y.Left:Y.Top,P=Q(()=>(a.value.x-h.value.x)/h.value.zoom),I=Q(()=>(a.value.y-h.value.y)/h.value.zoom),L=Q(()=>{let W=`M${S},${p} ${P.value},${I.value}`;switch(s.value||d.value.type){case Ge.Bezier:W=Vi({sourceX:S,sourceY:p,sourcePosition:m==null?void 0:m.position,targetX:P.value,targetY:I.value,targetPosition:M});break;case Ge.Step:W=Cn({sourceX:S,sourceY:p,sourcePosition:m==null?void 0:m.position,targetX:P.value,targetY:I.value,targetPosition:M,borderRadius:0});break;case Ge.SmoothStep:W=Cn({sourceX:S,sourceY:p,sourcePosition:m==null?void 0:m.position,targetX:P.value,targetY:I.value,targetPosition:M});break}return W});return(W,U)=>{var q;return G(),K("g",Xu,[Z(w)?(G(),ge(On(Z(v)),ir(Go({key:0},{sourceX:S,sourceY:p,sourcePosition:(q=Z(m))==null?void 0:q.position,targetX:P.value,targetY:I.value,targetPosition:Z(M),nodes:r.value,sourceNode:e.sourceNode,sourceHandle:Z(m),markerEnd:`url(#${Z(Ie)(d.value.markerEnd)})`,markerStart:`url(#${Z(Ie)(d.value.markerStart)})`})),null,16)):(G(),K("path",{key:1,d:Z(L),class:Re(["vue-flow__connection-path",d.value.class]),style:me(u.value||d.value.style||{}),"marker-end":`url(#${Z(Ie)(d.value.markerEnd)})`,"marker-start":`url(#${Z(Ie)(d.value.markerStart)})`},null,14,Yu))])}}})),qu={name:"NodesSelection"},Ku=le(ee(A({},qu),{setup(e){const t=ae(),n=b(t,"emits");b(t,"setState");const o=b(t,"viewport"),i=b(t,"getSelectedNodes");b(t,"snapToGrid"),b(t,"snapGrid");const r=b(t,"noPanClassName"),l=te();Ui({el:l,onStart(d,h,v){n.value.selectionDragStart({event:d,node:h,nodes:v})},onDrag(d,h,v){n.value.selectionDrag({event:d,node:h,nodes:v})},onStop(d,h,v){n.value.selectionDragStop({event:d,node:h,nodes:v})}});const a=Q(()=>Ln(i.value)),s=Q(()=>({width:`${a.value.width}px`,height:`${a.value.height}px`,top:`${a.value.y}px`,left:`${a.value.x}px`})),u=d=>n.value.selectionContextMenu({event:d,nodes:i.value});return(d,h)=>(G(),K("div",{class:Re(["vue-flow__nodesselection vue-flow__container",r.value]),style:me({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[ve("div",{ref_key:"el",ref:l,class:"vue-flow__nodesselection-rect",style:me(Z(s)),onContextmenu:u},null,36)],6))}})),Qu={name:"SelectionRect"},ju=le(ee(A({},Qu),{props:{width:null,height:null,x:null,y:null},setup(e){return(t,n)=>(G(),K("div",{class:"vue-flow__selection",style:me({width:`${e.width}px`,height:`${e.height}px`,transform:`translate(${e.x}px, ${e.y}px)`})},null,4))}}));function Lo(e){const t=e.target.closest(".vue-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const Ju={ref:"user-selection",class:"vue-flow__selectionpane vue-flow__container"},ec={name:"UserSelection"},tc=le(ee(A({},ec),{setup(e){const{userSelectionActive:t,nodesSelectionActive:n,getNodes:o,getEdges:i,viewport:r,addSelectedEdges:l,addSelectedNodes:a}=ae(),s=ti("user-selection",null);let u=te(0),d=te(0);const h=()=>({width:0,height:0,startX:0,startY:0,x:0,y:0,draw:!1});let v=te(h());const w=()=>{v.value=h(),u.value=0,d.value=0,t.value=!1},c=T=>{const S=Lo(T);!S||(v.value={width:0,height:0,startX:S.x,startY:S.y,x:S.x,y:S.y,draw:!0},t.value=!0,n.value=!0)},g=T=>{if(!t||!v.value.draw)return;const S=Lo(T);if(!S)return;const p=v.value.startX,C=v.value.startY,M=ee(A({},v.value),{x:S.x<p?S.x:v.value.x,y:S.y<C?S.y:v.value.y,width:Math.abs(S.x-p),height:Math.abs(S.y-C)}),P=Ai(o.value,v.value,r.value),I=de(P,i.value);v.value=M,a(P),l(I),u.value=P.length,d.value=I.length},m=()=>{v.value=h(),n.value=u.value>0,t.value=!1},y=()=>{n.value=u.value>0,w()};return Oe(s,"mousedown",c),Oe(s,"mousemove",g),Oe(s,"click",m),Oe(s,"mouseup",m),Oe(s,"mouseleave",y),Qt(w),(T,S)=>(G(),K("div",Ju,[v.value.draw?(G(),ge(ju,{key:0,width:v.value.width,height:v.value.height,x:v.value.x,y:v.value.y},null,8,["width","height","x","y"])):se("",!0)],512))}})),nc={input:Zn,default:Fn,output:Un},oc={default:Xn,straight:Wn,step:Gn,smoothstep:rn,simplebezier:Yn},ic=e=>typeof e!="undefined",rc=()=>({vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Xt.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultZoom:1,defaultPosition:[0,0],nodesSelectionActive:!1,userSelectionActive:!1,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:Ge.Bezier,connectionLineOptions:{type:Ge.Bezier,style:{}},connectionMode:je.Loose,connectionStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",hooks:gu(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,vueFlowVersion:"0.4.40"});var Fi=e=>{const t=rc();return e&&Object.keys(e).forEach(n=>{const o=e[n];ic(o)&&(t[n]=o)}),t},lc=(e,t)=>{const n=x=>{e.hooks.updateNodeInternals.trigger(x)},o=te();e.hooks.paneReady.on(({id:x})=>{o.value=sc(x)});const i=async()=>new Promise(x=>{o.value?x(o.value):st(o).not.toBeUndefined().then(()=>x(o.value))}),r=(x,N,k)=>{const B=[];x.forEach($=>{var R,J,ie,xe;const be={id:$.id,type:"position",dragging:k,from:$.from};if(N&&(be.computedPosition=$.position,be.position=$.position,$.parentNode)){const xt=t.getNode.value($.parentNode);be.position={x:be.position.x-((J=(R=xt==null?void 0:xt.computedPosition)==null?void 0:R.x)!=null?J:0),y:be.position.y-((xe=(ie=xt==null?void 0:xt.computedPosition)==null?void 0:ie.y)!=null?xe:0)}}B.push(be)}),B!=null&&B.length&&e.hooks.nodesChange.trigger(B)},l=x=>{if(!e.vueFlowRef)return;const N=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!N)return;const k=x.reduce((B,$)=>{const R=t.getNode.value($.id);if(R){const J=vt($.nodeElement),ie=window.getComputedStyle(N),{m22:xe}=new window.DOMMatrixReadOnly(ie.transform);(!!(J.width&&J.height&&(R.dimensions.width!==J.width||R.dimensions.height!==J.height))||$.forceUpdate)&&(R.handleBounds.source=Bo(".source",$.nodeElement,xe),R.handleBounds.target=Bo(".target",$.nodeElement,xe),R.dimensions=J,B.push({id:R.id,type:"dimensions",dimensions:J}))}return B},[]);k.length&&e.hooks.nodesChange.trigger(k)},a=(x,N)=>{const k=x.map($=>$.id);let B;e.multiSelectionActive?B=k.map($=>Gt($,N)):B=Do(e.nodes,k),B.length&&e.hooks.nodesChange.trigger(B)},s=(x,N)=>{const k=x.map($=>$.id);let B;e.multiSelectionActive?B=k.map($=>Gt($,N)):B=Do(e.edges,k),B.length&&e.hooks.edgesChange.trigger(B)},u=x=>{a(x,!0)},d=x=>{s(x,!0)},h=x=>{u(x.filter(Be)),d(x.filter(gt))},v=x=>{a(x,!1)},w=x=>{s(x,!1)},c=x=>{x?(x.nodes&&v(x.nodes.filter(Be)),x.edges&&w(x.edges.filter(gt))):(v([]),w([]))},g=x=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([x,e.maxZoom]),e.minZoom=x},m=x=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([e.minZoom,x]),e.maxZoom=x},y=x=>{var N;(N=e.d3Zoom)==null||N.translateExtent(x),e.translateExtent=x},T=async x=>{if(e.nodeExtent=x,o.value){const N=t.getNodes.value.map(k=>k.id);n(N)}},S=x=>{e.nodesDraggable=x,e.nodesConnectable=x,e.elementsSelectable=x},p=(x,N)=>{if(!e.initialized&&!x.length)return;e.nodes||(e.nodes=[]);const k=x instanceof Function?x(e.nodes):x;e.nodes=Ao(k,t.getNode.value,e.nodes,N!=null?N:e.nodeExtent)},C=x=>{if(!e.initialized&&!x.length)return;const N=x instanceof Function?x(e.edges):x;e.edges=N.reduce((k,B)=>{const $=t.getNode.value(B.source),R=t.getNode.value(B.target),J=!$||typeof $=="undefined",ie=!R||typeof R=="undefined";if(J&&console.warn(`[vue-flow]: Couldn't create edge for source id: ${B.source}; edge id: ${B.id}`),ie&&console.warn(`[vue-flow]: Couldn't create edge for target id: ${B.target}; edge id: ${B.id}`),J||ie)return k;const xe=t.getEdge.value(B.id);return k.push(Dt(ee(A({},Bi(B,Object.assign({},xe,e.defaultEdgeOptions))),{sourceNode:$,targetNode:R}))),k},[])},M=(x,N)=>{if(!e.initialized&&!x.length||!x)return;const k=x instanceof Function?x([...e.nodes,...e.edges]):x;p(k.filter(Oi),N),C(k.filter(_t))},P=(x,N)=>{const k=x instanceof Function?x(e.nodes):x,$=Ao(k,t.getNode.value,e.nodes,N!=null?N:e.nodeExtent).map(Io);$.length&&e.hooks.nodesChange.trigger($)},I=x=>{const k=(x instanceof Function?x(e.edges):x).reduce((B,$)=>{const R=Eu(A(A({},$),e.defaultEdgeOptions),e.edges);if(R){const J=t.getNode.value(R.source),ie=t.getNode.value(R.target),xe=!J||typeof J=="undefined",be=!ie||typeof ie=="undefined";if(xe&&console.warn(`[vueflow]: Couldn't create edge for source id: ${R.source}; edge id: ${R.id}`),be&&console.warn(`[vueflow]: Couldn't create edge for target id: ${R.target}; edge id: ${R.id}`),be||xe)return B;B.push(Io(Dt(ee(A({},R),{sourceNode:J,targetNode:ie}))))}return B},[]);k.length&&e.hooks.edgesChange.trigger(k)},L=(x,N=!0)=>{const k=x instanceof Function?x(e.nodes):x,B=[],$=[];k.forEach(R=>{if(B.push(fn(typeof R=="string"?R:R.id)),N){const J=de([typeof R=="string"?{id:R}:R],e.edges);$.push(...J.map(ie=>fn(ie.id)))}}),B.length&&e.hooks.nodesChange.trigger(B),$.length&&e.hooks.edgesChange.trigger($)},W=x=>{const N=x instanceof Function?x(e.edges):x,k=[];N.forEach(B=>{k.push(fn(typeof B=="string"?B:B.id))}),e.hooks.edgesChange.trigger(k)},U=Q(()=>e.nodes.map(x=>x.id)),q=Q(()=>e.edges.map(x=>x.id)),D=x=>e.nodes&&!U.value.length?e.nodes.find(N=>N.id===x):e.nodes[U.value.indexOf(x)],f=x=>e.edges&&!q.value.length?e.edges.find(N=>N.id===x):e.edges[q.value.indexOf(x)],E=(x,N)=>Su(x,N,e.edges),_=x=>To(x,e.nodes),z=x=>To(x,e.edges),H=(x,N,k)=>{e.connectionStartHandle=x,N&&(e.connectionPosition=N),e.hooks.connectStart.trigger({event:k,nodeId:x.nodeId,handleId:x.handleId,handleType:x.type})},V=x=>{e.connectionPosition=x},O=x=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStartHandle=null,e.hooks.connectEnd.trigger(x)},X=x=>{var N,k;const B=x instanceof Function?x(e):x,$=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"];typeof B.modelValue!="undefined"&&M(B.modelValue,(N=B.nodeExtent)!=null?N:e.nodeExtent),typeof B.nodes!="undefined"&&p(B.nodes,(k=B.nodeExtent)!=null?k:e.nodeExtent),typeof B.edges!="undefined"&&C(B.edges);const R=()=>{typeof B.maxZoom!="undefined"&&m(B.maxZoom),typeof B.minZoom!="undefined"&&g(B.minZoom),typeof B.translateExtent!="undefined"&&y(B.translateExtent),typeof B.nodeExtent!="undefined"&&T(B.nodeExtent)};Object.keys(B).forEach(J=>{const ie=B[J];!$.includes(J)&&Nu(ie)&&(e[J]=ie)}),e.d3Zoom?R():st(()=>e.d3Zoom).not.toBeUndefined().then(R),e.initialized||(e.initialized=!0)};return{updateNodePositions:r,updateNodeDimensions:l,setElements:M,setNodes:p,setEdges:C,addNodes:P,addEdges:I,removeNodes:L,removeEdges:W,findNode:D,findEdge:f,updateEdge:E,applyEdgeChanges:z,applyNodeChanges:_,addSelectedElements:h,addSelectedNodes:u,addSelectedEdges:d,setMinZoom:g,setMaxZoom:m,setTranslateExtent:y,setNodeExtent:T,removeSelectedElements:c,removeSelectedNodes:v,removeSelectedEdges:w,startConnection:H,updateConnection:V,endConnection:O,setInteractive:S,setState:X,fitView:async(x={padding:.1})=>{const{fitView:N}=await i();N(x)},zoomIn:async x=>{const{zoomIn:N}=await i();N(x)},zoomOut:async x=>{const{zoomOut:N}=await i();N(x)},zoomTo:async(x,N)=>{const{zoomTo:k}=await i();k(x,N)},setTransform:async(x,N)=>{const{setTransform:k}=await i();k(x,N)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),setCenter:async(x,N,k)=>{const{setCenter:B}=await i();B(x,N,k)},fitBounds:async(x,N)=>{const{fitBounds:k}=await i();k(x,N)},project:x=>Vn(x,e.viewport,e.snapToGrid,e.snapGrid),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:n,$reset:()=>{X(Fi())},$destroy:()=>{}}},ac=e=>{const t=Q(()=>e.nodes.map(c=>c.id)),n=Q(()=>e.edges.map(c=>c.id)),o=Q(()=>c=>e.nodes&&!t.value.length?e.nodes.find(g=>g.id===c):e.nodes[t.value.indexOf(c)]),i=Q(()=>c=>e.edges&&!n.value.length?e.edges.find(g=>g.id===c):e.edges[n.value.indexOf(c)]),r=Q(()=>{var c;const g=A(A({},oc),e.edgeTypes),m=Object.keys(g);return(c=e.edges)==null||c.forEach(y=>y.type&&!m.includes(y.type)&&(g[y.type]=y.type)),g}),l=Q(()=>{var c;const g=A(A({},nc),e.nodeTypes),m=Object.keys(g);return(c=e.nodes)==null||c.forEach(y=>y.type&&!m.includes(y.type)&&(g[y.type]=y.type)),g}),a=Q(()=>{const c=e.nodes.filter(g=>!g.hidden);return e.onlyRenderVisibleElements?c&&Ai(c,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):c!=null?c:[]}),s=(c,g,m)=>{if(g=g!=null?g:o.value(c.source),m=m!=null?m:o.value(c.target),!g||!m){e.edges=e.edges.filter(y=>y.id!==c.id),console.warn(`[vue-flow]: Orphaned edge ${c.id} removed.`);return}return!c.hidden&&m&&!m.hidden&&g&&!g.hidden&&g.dimensions.width&&g.dimensions.height&&m.dimensions.width&&m.dimensions.height},u=Q(()=>e.onlyRenderVisibleElements?e.edges.filter(c=>{const g=o.value(c.source),m=o.value(c.target);return s(c,g,m)&&xu({sourcePos:g.computedPosition||{x:0,y:0},targetPos:m.computedPosition||{x:0,y:0},sourceWidth:g.dimensions.width,sourceHeight:g.dimensions.height,targetWidth:m.dimensions.width,targetHeight:m.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(c=>s(c))),d=Q(()=>[...a.value,...u.value]),h=Q(()=>e.nodes.filter(c=>c.selected)),v=Q(()=>e.edges.filter(c=>c.selected)),w=Q(()=>{var c,g;return[...(c=h.value)!=null?c:[],...(g=v.value)!=null?g:[]]});return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:r,getNodeTypes:l,getEdges:u,getNodes:a,getSelectedElements:w,getSelectedNodes:h,getSelectedEdges:v}};class Ue{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return Ue.instance||(Ue.instance=new Ue),Ue.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Fi(n),i=Ji(o),r=ac(i),l=lc(i,r),a={};Object.entries(i.hooks).forEach(([d,h])=>{const v=`on${d.charAt(0).toUpperCase()+d.slice(1)}`;a[v]=h.on});const s={};Object.entries(i.hooks).forEach(([d,h])=>{s[d]=h.trigger}),l.setState(i),n&&(n.modelValue&&l.setElements(n.modelValue),n.nodes&&l.setNodes(n.nodes),n.edges&&l.setEdges(n.edges));const u=ee(A(A(A(A({},a),r),l),er(i)),{emits:s,id:t,$destroy:()=>{this.remove(t)}});return this.set(t,u),u}getId(){return`vue-flow-${this.currentId++}`}}var ae=e=>{const t=Ue.getInstance(),n=Xo(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let r,l=!1;if(n){const a=qe(ko,null);typeof a!="undefined"&&a!==null&&(r=a)}if(r||i&&(r=t.get(i)),!r||r&&o&&o!==r.id){const a=o!=null?o:t.getId();r=t.create(a,e),n&&(l=!0)}else e&&r.setState(e);if(!r)throw new Error("[vueflow]: store instance not found.");return n&&(We(ko,r),n.vueFlowId=r.id,l&&pt(()=>{t.get(r.id)&&r.$destroy(),r=null})),r};const hn=(e,t,n,o,i,r,l,a,s)=>{var u,d;const h=l.elementFromPoint(e.clientX,e.clientY),v=(h==null?void 0:h.classList.contains("target"))||!1,w=(h==null?void 0:h.classList.contains("source"))||!1,c={elementBelow:h,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(h&&(v||w)&&(c.isHoveringHandle=!0,t===je.Strict?n&&w||!n&&v:!0)){const m=(u=h.getAttribute("data-nodeid"))!=null?u:"",y=(d=h.getAttribute("data-handleid"))!=null?d:"",T=n?m:o,S=n?y:i,p=n?o:m,M={source:T,sourceHandle:S,target:p,targetHandle:n?i:y};c.connection=M,c.isValid=(at(r)?r(M,{edges:a,sourceNode:s(T),targetNode:s(p)}):!0)||!c.connection.target||!c.connection.source}return c},Fo=e=>{e==null||e.classList.remove("vue-flow__handle-valid"),e==null||e.classList.remove("vue-flow__handle-connecting")};var Zi=()=>{const e=ae(),t=b(e,"edges"),n=b(e,"connectOnClick"),o=b(e,"nodesConnectable"),i=b(e,"connectionStartHandle"),r=b(e,"connectionMode"),l=b(e,"emits"),a=b(e,"startConnection"),s=b(e,"updateConnection"),u=b(e,"endConnection"),d=b(e,"getNode"),h=b(e,"vueFlowRef");let v;return{onMouseDown:(g,m,y,T,S,p,C,M)=>{const P=$o(g.target);if(!P)return;let I=S;const L=d.value(y);if(L&&(typeof L.connectable=="undefined"?o.value:L.connectable)===!1)return;S||L&&(I=T?L.isValidSourcePos:L.isValidTargetPos);const W=P.elementFromPoint(g.clientX,g.clientY),U=W==null?void 0:W.classList.contains("target"),q=W==null?void 0:W.classList.contains("source");if(!h.value||!U&&!q&&!p)return;const D=p!=null?p:U?"target":"source",f=h.value.getBoundingClientRect();a.value({nodeId:y,handleId:m,type:D},{x:g.clientX-f.left,y:g.clientY-f.top},g);function E(z){s.value({x:z.clientX-f.left,y:z.clientY-f.top});const{connection:H,elementBelow:V,isValid:O,isHoveringHandle:X}=hn(z,r.value,T,y,m,I,P,t.value,d.value);if(!X)return Fo(v);!(H.source===H.target)&&V&&(v=V,V.classList.add("vue-flow__handle-connecting"),V.classList.toggle("vue-flow__handle-valid",O))}function _(z){const{connection:H,isValid:V}=hn(z,r.value,T,y,m,I,P,t.value,d.value),O=H.source===H.target;V&&!O&&(C?C(H):l.value.connect(H)),p&&(M==null||M()),Fo(v),u.value(z),P.removeEventListener("mousemove",E),P.removeEventListener("mouseup",_)}P.addEventListener("mousemove",E),P.addEventListener("mouseup",_)},onClick:(g,m,y,T,S)=>{var p;if(!!n.value)if(!i.value)a.value({nodeId:y,type:T,handleId:m},void 0,g);else{let C=S!=null?S:()=>!0;const M=d.value(y);if(M&&(typeof M.connectable=="undefined"?o.value:M.connectable)===!1)return;S||M&&(C=(p=T!=="target"?M.isValidTargetPos:M.isValidSourcePos)!=null?p:()=>!0);const P=$o(g.target),{connection:I,isValid:L}=hn(g,r.value,i.value.type==="target",i.value.nodeId,i.value.handleId||null,C,P,t.value,d.value),W=I.source===I.target;L&&!W&&l.value.connect(I),u.value(g)}}}},tt=()=>typeof window!="undefined"?window:{chrome:!1};function Zo(e){const t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}var lt=(e,t)=>{const n=tt();let o=te(!1);return re(o,()=>{t&&typeof t=="function"&&t(o.value)}),oo(Z(e),i=>{Zo(i)||(i.preventDefault(),o.value=!0)},{eventName:"keydown"}),oo(Z(e),i=>{Zo(i)||(i.preventDefault(),o.value=!1)},{eventName:"keyup"}),typeof n.addEventListener!="undefined"&&Oe(n,"blur",()=>{o.value=!1}),t&&typeof t=="function"&&t(o.value),o};const vn=.1,gn=(e,t=0)=>e.transition().duration(t),Le=async(e,t)=>{const n=tt();return"screen"in n&&(await st(e).toMatch(({height:o,width:i})=>!isNaN(i)&&i>0&&!isNaN(o)&&o>0),t.length>0&&await st(t).toMatch(o=>!!o.filter(({dimensions:{width:i,height:r}})=>!isNaN(i)&&i>0&&!isNaN(r)&&r>0).length)),!0};var sc=e=>{const t=ae({id:e}),n=b(t,"onPaneReady"),o=b(t,"nodes"),i=b(t,"d3Zoom"),r=b(t,"d3Selection"),l=b(t,"dimensions"),a=b(t,"translateExtent"),s=b(t,"minZoom"),u=b(t,"maxZoom"),d=b(t,"viewport"),h=b(t,"snapToGrid"),v=b(t,"snapGrid"),w=b(t,"getNodes");let c=te(!1);n.value(()=>c.value=!0);const g=async(p,C)=>{c.value||await Le(l.value,w.value),r.value&&i.value&&i.value.scaleTo(gn(r.value,C==null?void 0:C.duration),p)},m=async(p,C)=>{c.value||await Le(l.value,w.value),r.value&&i.value&&i.value.scaleBy(gn(r.value,C),p)},y=async p=>{await m(1.2,p==null?void 0:p.duration)},T=async p=>{await m(1/1.2,p==null?void 0:p.duration)},S=(p,C,M,P)=>{const{x:I,y:L}=Hn({x:-p,y:-C},a.value),W=nn.translate(-I,-L).scale(M);r.value&&i.value&&i.value.transform(gn(r.value,P),W)};return{zoomIn:y,zoomOut:T,zoomTo:g,setTransform:async(p,C)=>{c.value||await Le(l.value,w.value),S(p.x,p.y,p.zoom,C==null?void 0:C.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:async(p={padding:vn,includeHiddenNodes:!1,duration:0})=>{var C,M,P;if(c.value||await Le(l.value,w.value),!w.value.length)return;let I=[];p.nodes&&(I=o.value.filter(D=>{var f;return(f=p.nodes)==null?void 0:f.includes(D.id)})),(!I||!I.length)&&(I=p.includeHiddenNodes?I:w.value);const L=Ln(I),{x:W,y:U,zoom:q}=Co(L,l.value.width,l.value.height,(C=p.minZoom)!=null?C:s.value,(M=p.maxZoom)!=null?M:u.value,(P=p.padding)!=null?P:vn,p.offset);S(W,U,q,p==null?void 0:p.duration)},setCenter:async(p,C,M)=>{c.value||await Le(l.value,w.value);const P=typeof(M==null?void 0:M.zoom)!="undefined"?M.zoom:u.value,I=l.value.width/2-p*P,L=l.value.height/2-C*P;S(I,L,P,M==null?void 0:M.duration)},fitBounds:async(p,C={padding:vn})=>{c.value||await Le(l.value,w.value);const{x:M,y:P,zoom:I}=Co(p,l.value.width,l.value.height,s.value,u.value,C.padding);S(M,P,I,C==null?void 0:C.duration)},project:p=>Vn(p,d.value,h.value,v.value)}};function Uo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n.value)return!1;o=o.parentElement}while(o);return!1}function uc(e,t,n,o){return e.filter(i=>(i.selected||i.id===o)&&(!i.parentNode||!Ri(i,n))).map(i=>{var r,l;return pn({id:i.id,position:i.computedPosition||{x:0,y:0,z:0},distance:{x:t.x-((r=i.computedPosition)==null?void 0:r.x)||0,y:t.y-((l=i.computedPosition)==null?void 0:l.y)||0},from:i.computedPosition,extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions})})}function mn({id:e,dragItems:t,getNode:n}){const o=t.map(i=>{const r=n.value(i.id);return A({},r)});return[e?o.find(i=>i.id===e):o[0],o]}function cc(e,t,n,o,i,r){const l={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&o){const[s,u]=o;l.x=s*Math.round(l.x/s),l.y=u*Math.round(l.y/u)}const a=dc(e,r,i);return e.position=a?Hn(l,a):l,e}function dc(e,t,n){var o,i,r,l;let a=e.extent||t;if(e.extent==="parent"&&n)e.parentNode&&e.dimensions.width&&e.dimensions.height&&(a=n.computedPosition&&n.dimensions.width&&n.dimensions.height?[[n.computedPosition.x,n.computedPosition.y],[n.computedPosition.x+n.dimensions.width-e.dimensions.width,n.computedPosition.y+n.dimensions.height-e.dimensions.height]]:a);else if(e.extent&&e.parentNode){const s=e.extent,u=(i=(o=n==null?void 0:n.computedPosition)==null?void 0:o.x)!=null?i:0,d=(l=(r=n==null?void 0:n.computedPosition)==null?void 0:r.y)!=null?l:0;a=[[s[0][0]+u,s[0][1]+d],[s[1][0]+u,s[1][1]+d]]}return a}function Ui(e){const t=It(),n=t.run(()=>{const o=ae(),i=b(o,"viewport"),r=b(o,"snapToGrid"),l=b(o,"snapGrid"),a=b(o,"noDragClassName"),s=b(o,"nodes"),u=b(o,"nodeExtent"),d=b(o,"getNode"),h=b(o,"multiSelectionActive"),v=b(o,"nodesSelectionActive"),w=b(o,"selectNodesOnDrag"),c=b(o,"removeSelectedElements"),g=b(o,"addSelectedNodes"),m=b(o,"updateNodePositions"),y=e,T=b(y,"onStart"),S=b(y,"onDrag"),p=b(y,"onStop"),C=b(y,"el"),M=b(y,"disabled",!1),P=b(y,"id"),I=te(!1);let L=te(),W=te({x:void 0,y:void 0}),U=te();const q=f=>(f!=null?f:r.value)?l.value:void 0,D=(f,E)=>{const _=f.sourceEvent.touches?f.sourceEvent.touches[0].clientX:f.sourceEvent.clientX,z=f.sourceEvent.touches?f.sourceEvent.touches[0].clientY:f.sourceEvent.clientY;return Vn({x:_,y:z},i.value,!!E,E!=null?E:l.value)};return re([()=>M.value,()=>C.value],()=>{if(C.value){const f=pe(C.value),E=P.value?d.value(P.value):void 0;M.value?f.on(".drag",null):(U.value=ba().on("start",_=>{!w.value&&!h.value&&P.value&&(E!=null&&E.selected||c.value()),E&&!M.value&&w.value&&Hi(E,h.value,g.value,c.value,v);const z=D(_,q(E==null?void 0:E.snapGrid));if(L.value=uc(s.value,z,d.value,P.value),T.value&&L.value){const[H,V]=mn({id:P.value,dragItems:L.value,getNode:d});T.value(_.sourceEvent,H,V)}}).on("drag",_=>{const z=q(E==null?void 0:E.snapGrid),H=D(_,z);if((W.value.x!==H.x||W.value.y!==H.y)&&L.value&&(W.value=H,L.value=L.value.map(V=>cc(V,H,!!z,z!=null?z:l.value,V.parentNode?d.value(V.parentNode):void 0,u.value)),m.value(L.value,!0,!0),I.value=!0,S.value)){const[V,O]=mn({id:P.value,dragItems:L.value,getNode:d});S.value(_.sourceEvent,V,O)}_.on("end",V=>{if(I.value=!1,p.value&&L.value){m.value(L.value,!1,!1);const[O,X]=mn({id:P.value,dragItems:L.value,getNode:d});p.value(V.sourceEvent,O,X)}})}).filter(_=>{const z=_.target;return!_.button&&(!a.value||!Uo(z,`.${a.value}`,C)&&(!(E!=null&&E.dragHandle)||Uo(z,E.dragHandle,C)))}),f.call(U.value))}}),I});return pt(()=>t.stop()),n}const fc=()=>({doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),dragStart:F(),drag:F(),dragStop:F()});function hc(e,t){const n=fc();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}const vc=()=>({doubleClick:F(),click:F(),mouseEnter:F(),mouseMove:F(),mouseLeave:F(),contextMenu:F(),updateStart:F(),update:F(),updateEnd:F()});function gc(e,t){const n=vc();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function mc(e){const t=e!=null?e:qe(Ci,""),n=qe(zi,null),{findNode:o,getEdges:i}=ae(),r=o(t);if(!r)throw new Error(`[vue-flow]: useNode - Node with id ${t} not found!`);return{id:t,node:r,nodeEl:n,parentNode:r.parentNode?o(r.parentNode):void 0,connectedEdges:Q(()=>de([r],i.value))}}const pc={name:"SelectionPane",inheritAttrs:!1},yc=le(ee(A({},pc),{setup(e){const{id:t,deleteKeyCode:n,selectionKeyCode:o,multiSelectionKeyCode:i,emits:r,nodesSelectionActive:l,userSelectionActive:a,multiSelectionActive:s,elementsSelectable:u,getNodes:d,getSelectedEdges:h,removeSelectedElements:v,removeNodes:w,removeEdges:c}=ae(),g=M=>{r.paneClick(M),l.value=!1,v()},m=M=>r.paneContextMenu(M),y=M=>r.paneScroll(M),T=M=>r.paneMouseEnter(M),S=M=>r.paneMouseLeave(M),p=M=>r.paneMouseMove(M);lt(n,M=>{if(!M)return;const P=d.value.reduce((I,L)=>((!L.selected&&L.parentNode&&I.find(W=>W.id===L.parentNode)||L.selected)&&I.push(L),I),[]);(P||h.value)&&(h.value.length>0&&c(h.value),P.length>0&&w(P),l.value=!1,v())}),lt(i,M=>{s.value=M});const C=lt(o,M=>{a.value&&M||(a.value=M&&u.value)});return(M,P)=>(G(),K(we,null,[Z(C)?(G(),ge(Z(tc),{key:`user-selection-${Z(t)}`})):se("",!0),Z(l)?(G(),ge(Z(Ku),{key:`nodes-selection-${Z(t)}`})):se("",!0),(G(),K("div",{key:`pane-${Z(t)}`,class:"vue-flow__pane vue-flow__container",onClick:g,onContextmenu:m,onWheel:y,onMouseenter:T,onMousemove:p,onMouseleave:S},null,32))],64))}})),wc={class:"vue-flow__nodes vue-flow__container"},_c={name:"Nodes"},xc=le(ee(A({},_c),{setup(e){const t=qe(on),n=ae(),o=b(n,"nodesDraggable"),i=b(n,"elementsSelectable"),r=b(n,"nodesConnectable");b(n,"noPanClassName"),b(n,"snapToGrid"),b(n,"snapGrid"),b(n,"getNode");const l=b(n,"getNodes"),a=b(n,"getNodeTypes"),s=b(n,"updateNodeDimensions"),u=c=>typeof c=="undefined"?o.value:c,d=c=>typeof c=="undefined"?i.value:c,h=c=>typeof c=="undefined"?r.value:c,v=te();$e(()=>{v.value=new ResizeObserver(c=>{const g=c.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s.value(g)})}),Qt(()=>{var c;return(c=v.value)==null?void 0:c.disconnect()});const w=(c,g)=>{const m=c||"default";let y=g!=null?g:a.value[m];const T=mt();if(typeof y=="string"&&T){const p=Object.keys(T.appContext.components);p&&p.includes(m)&&(y=Wo(m,!1))}if(typeof y!="string")return y;const S=t==null?void 0:t[`node-${m}`];return S!=null&&S({})?S:(console.warn(`[vueflow]: Node type "${c}" not found and no node-slot detected. Using fallback type "default".`),!1)};return(c,g)=>(G(),K("div",wc,[v.value?(G(!0),K(we,{key:0},Ae(l.value,m=>(G(),ge(Z(zu),{id:m.id,key:m.id,"resize-observer":v.value,type:w(m.type,m.template),name:m.type||"default",draggable:u(m.draggable),selectable:d(m.selectable),connectable:h(m.connectable),node:m},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","node"]))),128)):se("",!0)]))}})),bc=["id","markerWidth","markerHeight","markerUnits","orient"],Nc=["stroke","stroke-width","fill"],Ec=["stroke","stroke-width"],Sc={name:"MarkerType"},Mc=le(ee(A({},Sc),{props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(G(),K("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type==="arrowclosed"?(G(),K("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,Nc)):se("",!0),e.type==="arrow"?(G(),K("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Ec)):se("",!0)],8,bc))}})),kc={name:"MarkerDefinitions"},$c=le(ee(A({},kc),{setup(e){const t=ae(),n=b(t,"edges"),o=b(t,"connectionLineOptions"),i=b(t,"defaultMarkerColor"),r=Q(()=>{const l=[],a=[],s=u=>{if(u){const d=Ie(u);l.includes(d)||(typeof u=="object"?a.push(ee(A({},u),{id:d,color:u.color||i.value})):a.push({id:d,color:i.value,type:u}),l.push(d))}};return[o.value.markerEnd,o.value.markerStart].forEach(s),n.value.reduce((u,d)=>([d.markerStart,d.markerEnd].forEach(s),u.sort((h,v)=>h.id.localeCompare(v.id))),a),a});return(l,a)=>(G(),K("defs",null,[(G(!0),K(we,null,Ae(Z(r),s=>(G(),ge(Mc,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}})),Cc={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},zc={name:"Edges"},Oc=le(ee(A({},zc),{setup(e){const t=qe(on),n=ae(),o=b(n,"emits"),i=b(n,"connectionMode"),r=b(n,"edgeUpdaterRadius"),l=b(n,"onPaneReady"),a=b(n,"connectionStartHandle"),s=b(n,"nodesConnectable"),u=b(n,"edgesUpdatable"),d=b(n,"elementsSelectable"),h=b(n,"getSelectedNodes"),v=b(n,"nodesSelectionActive"),w=b(n,"getNode");b(n,"getNodes");const c=b(n,"getEdges"),g=b(n,"getEdgeTypes"),m=b(n,"addSelectedEdges"),y=b(n,"noPanClassName"),T=b(n,"elevateEdgesOnSelect"),S=N=>typeof N=="undefined"?d.value:N,p=N=>typeof N=="undefined"?u.value:N,C=te(),M=At(()=>{var N;return(N=a.value)==null?void 0:N.nodeId},()=>{var N;return(N=a.value)!=null&&N.nodeId?w.value(a.value.nodeId):!1}),P=At(()=>{var N;return(N=a.value)==null?void 0:N.nodeId},()=>{var N,k;return!!(M.value&&(typeof M.value.connectable=="undefined"?s.value:M.value.connectable)&&((N=a.value)==null?void 0:N.nodeId)&&((k=a.value)==null?void 0:k.type))}),I=te({});let L=te([]),W=It();l.value(()=>{W||(W=It()),W.run(()=>{re([h,c],()=>{c.value.forEach(N=>{I.value[N.id]||(I.value[N.id]=gc(N,o.value))}),T.value?Ze(()=>L.value=bu(c.value,w.value)):L.value=[{isMaxLevel:!0,edges:c.value,level:0}]},{immediate:!0})})}),Qt(()=>{W==null||W.stop(),W=null});const U=(N,k)=>{const B=N||"default";let $=k!=null?k:g.value[B];const R=mt();if(typeof $=="string"&&R){const ie=Object.keys(R.appContext.components);ie&&ie.includes(B)&&($=Wo(B,!1))}if($&&typeof $!="string")return $;const J=t==null?void 0:t[`edge-${B}`];return J!=null&&J({})?J:(console.warn(`[vueflow]: Edge type "${N}" not found and no edge-slot detected. Using fallback type "default".`),!1)},q=(N,k)=>{const B={event:N,edge:k};S(k.selectable)&&(v.value=!1,m.value([k])),I.value[k.id].emit.click(B)},D=(N,k)=>I.value[k.id].emit.contextMenu({event:N,edge:k}),f=(N,k)=>I.value[k.id].emit.doubleClick({event:N,edge:k}),E=(N,k)=>I.value[k.id].emit.mouseEnter({event:N,edge:k}),_=(N,k)=>I.value[k.id].emit.mouseMove({event:N,edge:k}),z=(N,k)=>I.value[k.id].emit.mouseLeave({event:N,edge:k}),H=(N,k)=>{C.value=k.id,X(N,k,!0)},V=(N,k)=>{C.value=k.id,X(N,k,!1)},{onMouseDown:O}=Zi(),X=(N,k,B)=>{var $;const R=B?k.target:k.source,J=($=B?k.targetHandle:k.sourceHandle)!=null?$:"";I.value[k.id].emit.updateStart({event:N,edge:k}),O(N,J,R,B,void 0,B?"target":"source",ie=>{Ti(ie,c.value)||I.value[k.id].emit.update({edge:k,connection:ie})},()=>{I.value[k.id].emit.updateEnd({event:N,edge:k}),C.value=""})},j=N=>{const k=N.class instanceof Function?N.class(N):N.class;return[y.value,k]},x=N=>N.style instanceof Function?N.style(N):N.style;return(N,k)=>(G(),K(we,null,[(G(!0),K(we,null,Ae(L.value,B=>(G(),K("svg",{key:B.level,class:"vue-flow__edges vue-flow__container",style:me(`z-index: ${B.level}`)},[B.isMaxLevel?(G(),ge($c,{key:0})):se("",!0),ve("g",null,[(G(!0),K(we,null,Ae(B.edges,$=>(G(),ge(Z(Uu),{id:$.id,key:$.id,type:U($.type,$.template),name:$.type||"default",source:$.source,target:$.target,"target-handle-id":$.targetHandle,"source-handle-id":$.sourceHandle,"source-node":w.value($.source),"target-node":w.value($.target),label:$.label,data:$.data,events:A(A({},$.events),I.value[$.id].on),animated:$.animated,selectable:S($.selectable),selected:$.selected,updatable:p($.updatable),updating:$.id===C.value,"label-style":$.labelStyle,"label-show-bg":$.labelShowBg,"label-bg-style":$.labelBgStyle,"label-bg-padding":$.labelBgPadding,"label-bg-border-radius":$.labelBgBorderRadius,"connection-mode":i.value,"edge-updater-radius":r.value,"marker-end":$.markerEnd,"marker-start":$.markerStart,style:me(x($)),class:Re(j($)),onClick:R=>q(R,$),onDblclick:R=>f(R,$),onContextmenu:R=>D(R,$),onMouseenter:R=>E(R,$),onMousemove:R=>_(R,$),onMouseleave:R=>z(R,$),onSourceMousedown:R=>H(R,$),onTargetMousedown:R=>V(R,$)},null,8,["id","type","name","source","target","target-handle-id","source-handle-id","source-node","target-node","label","data","events","animated","selectable","selected","updatable","updating","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","connection-mode","edge-updater-radius","marker-end","marker-start","style","class","onClick","onDblclick","onContextmenu","onMouseenter","onMousemove","onMouseleave","onSourceMousedown","onTargetMousedown"]))),128))])],4))),128)),P.value&&!!M.value?(G(),K("svg",Cc,[ce(Wu,{"source-node":M.value},null,8,["source-node"])])):se("",!0)],64))}})),Bc={name:"Transform"},Pc=le(ee(A({},Bc),{setup(e){const d=ae(),{id:t,viewport:n,dimensions:o,fitViewOnInit:i,emits:r,fitView:l}=d,a=ln(d,["id","viewport","dimensions","fitViewOnInit","emits","fitView"]),s=async h=>{const v=tt();return"screen"in v&&await st(h).toMatch(({height:w,width:c})=>!isNaN(c)&&c>0&&!isNaN(w)&&w>0),!0};let u=te(!1);return $e(async()=>{await s(o.value),u.value=!0,r.paneReady(A({id:t,viewport:n,dimensions:o,fitViewOnInit:i,fitView:l,emits:r},a)),i!=null&&i.value&&l()}),(h,v)=>(G(),K("div",{key:`transform-${Z(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:me({transform:`translate(${Z(n).x}px,${Z(n).y}px) scale(${Z(n).zoom})`,opacity:u.value?void 0:0})},[ce(Oc),ce(xc),ne(h.$slots,"default")],4))}})),Tc={name:"Viewport"},Ic=le(ee(A({},Tc),{setup(e){const t=ae(),n=b(t,"id"),o=b(t,"minZoom"),i=b(t,"maxZoom"),r=b(t,"defaultZoom"),l=b(t,"defaultPosition"),a=b(t,"translateExtent"),s=b(t,"dimensions"),u=b(t,"zoomActivationKeyCode"),d=b(t,"selectionKeyCode"),h=b(t,"panOnScroll"),v=b(t,"panOnScrollMode"),w=b(t,"panOnScrollSpeed"),c=b(t,"panOnDrag"),g=b(t,"zoomOnDoubleClick"),m=b(t,"zoomOnPinch"),y=b(t,"zoomOnScroll"),T=b(t,"preventScrolling"),S=b(t,"noWheelClassName"),p=b(t,"noPanClassName"),C=b(t,"setState"),M=b(t,"emits"),P=ti("viewport",null);let I=te(!1);const L=(f,E)=>f.x!==E.x&&!isNaN(E.x)||f.y!==E.y&&!isNaN(E.y)||f.zoom!==E.k&&!isNaN(E.k),W=f=>({x:f.x,y:f.y,zoom:f.k}),U=(f,E)=>f.target.closest(`.${E}`),q=Yt(r.value,o.value,i.value);let D=te(ee(A({},Hn({x:l.value[0],y:l.value[1]},a.value)),{zoom:q}));return $e(()=>{Cr(P,()=>{if(!P.value)return;const{width:E,height:_}=vt(P.value);s.value.width=E,s.value.height=_});const f=tt();Oe(f,"resize",()=>{if(!P.value)return;const{width:E,height:_}=vt(P.value);s.value.width=E,s.value.height=_})}),$e(()=>{const f=fu().scaleExtent([o.value,i.value]).translateExtent(a.value),E=pe(P.value).call(f),_=E.on("wheel.zoom"),z=nn.translate(D.value.x,D.value.y).scale(D.value.zoom);f.transform(E,z),C.value({d3Zoom:f,d3Selection:E,d3ZoomHandler:_,viewport:{x:z.x,y:z.y,zoom:z.k},viewportRef:P.value});const H=lt(d.value,O=>{O&&!I.value?f.on("zoom",null):O||f.on("zoom",X=>{C.value({viewport:{x:X.transform.x,y:X.transform.y,zoom:X.transform.k}});const j=W(X.transform);M.value.move({event:X,flowTransform:j})})}),V=lt(u.value);f.on("start",O=>{I.value=!0;const X=W(O.transform);D.value=X,M.value.moveStart({event:O,flowTransform:X})}),f.on("end",O=>{if(I.value=!1,L(D.value,O.transform)){const X=W(O.transform);D.value=X,M.value.moveEnd({event:O,flowTransform:X})}}),tr(()=>{h.value&&!V.value?E.on("wheel",O=>{var X;if(U(O,(X=S.value)==null?void 0:X.value))return!1;O.preventDefault(),O.stopImmediatePropagation();const j=E.property("__zoom").k||1;if(O.ctrlKey&&m.value){const B=Ne(O),$=-O.deltaY*(O.deltaMode===1?.05:O.deltaMode?1:.002)*10,R=j*2**$;f.scaleTo(E,R,B);return}const x=O.deltaMode===1?20:1,N=v.value===Xt.Vertical?0:O.deltaX*x,k=v.value===Xt.Horizontal?0:O.deltaY*x;f.translateBy(E,-(N/j)*w.value,-(k/j)*w.value)}).on("wheel.zoom",null):typeof _!="undefined"&&E.on("wheel",O=>{var X;if(!T.value||U(O,(X=S.value)==null?void 0:X.value))return null;O.preventDefault()}).on("wheel.zoom",_)}),f.filter(O=>{const X=V.value||y.value,j=m.value&&O.ctrlKey;return!c.value&&!X&&!h.value&&!g.value&&!m.value||H.value||!g.value&&O.type==="dblclick"||U(O,S.value)&&O.type==="wheel"||U(O,p.value)&&O.type!=="wheel"||!m.value&&O.ctrlKey&&O.type==="wheel"||!X&&!h.value&&!j&&O.type==="wheel"||!c.value&&(O.type==="mousedown"||O.type==="touchstart")?!1:(!O.ctrlKey||O.type==="wheel")&&!O.button})}),(f,E)=>(G(),K("div",{ref:"viewport",key:`viewport-${n.value}`,class:"vue-flow__viewport vue-flow__container"},[ce(Pc,null,{default:Ee(()=>[ne(f.$slots,"default")]),_:3}),ce(yc)]))}})),ue=e=>typeof Z(e)!="undefined";var Dc=(e,t,n)=>{const o=It();return o.run(()=>{[()=>{o.run(()=>{let c,g;c=Ve([e.modelValue,()=>{var m,y;return(y=(m=e.modelValue)==null?void 0:m.value)==null?void 0:y.length}],([m])=>{m&&Array.isArray(m)&&(g&&g.pause(),c&&c.pause(),n.setElements(m),g=Ve([n.edges,n.nodes,()=>n.edges.value.length,()=>n.nodes.value.length],([y,T])=>{c&&c.pause();const S=[...T,...y];S.length&&(e.modelValue.value=S),Ze(()=>{c&&c.resume()})},{immediate:!0}),Ze(()=>{g&&g.resume(),c&&c.resume()}))},{immediate:!!(e.modelValue&&e.modelValue.value)})})},()=>{o.run(()=>{let c,g;c=Ve([e.nodes,()=>{var m,y;return(y=(m=e.nodes)==null?void 0:m.value)==null?void 0:y.length}],async([m])=>{m&&Array.isArray(m)&&(g&&g.pause(),c&&c.pause(),n.setNodes(m),g=Ve(()=>n.nodes.value.length,()=>{n.nodes.value.length&&(e.nodes.value=[...n.nodes.value])},{immediate:!0}),Ze(()=>{g&&g.resume(),c&&c.resume()}))},{immediate:!!(e.nodes&&e.nodes.value)})})},()=>{o.run(()=>{let c,g;c=Ve([e.edges,()=>{var m,y;return(y=(m=e.edges)==null?void 0:m.value)==null?void 0:y.length}],async([m])=>{m&&Array.isArray(m)&&(g&&g.pause(),c&&c.pause(),n.setEdges(m),g=Ve(()=>n.edges.value.length,()=>{n.edges.value.length&&(e.edges.value=[...n.edges.value])},{immediate:!0}),Ze(()=>{g&&g.resume(),c&&c.resume()}))},{immediate:!!(e.edges&&e.edges.value)})})},()=>{o.run(()=>{re(()=>t.minZoom,()=>{t.minZoom&&ue(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:ue(t.minZoom)})})},()=>{o.run(()=>{re(()=>t.maxZoom,()=>{t.maxZoom&&ue(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:ue(t.maxZoom)})})},()=>{o.run(()=>{re(()=>t.translateExtent,()=>{t.translateExtent&&ue(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:ue(t.translateExtent)})})},()=>{o.run(()=>{re(()=>t.nodeExtent,()=>{t.nodeExtent&&ue(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:ue(t.nodeExtent)})})},()=>{o.run(()=>{re(()=>t.applyDefault,()=>{ue(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:ue(t.applyDefault)}),re(n.applyDefault,(c,g,m)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),m(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const c=async g=>{let m=g;at(t.autoConnect)&&(m=await t.autoConnect(g)),m!==!1&&n.addEdges([m])};re(()=>t.autoConnect,()=>{ue(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:ue(t.autoConnect)}),re(n.autoConnect,(g,m,y)=>{g?n.onConnect(c):n.hooks.value.connect.off(c),y(()=>{n.hooks.value.connect.off(c)})},{immediate:!0})})},()=>{const c=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(g=>{if(!c.includes(g)){const m=b(t,g),y=n[g];o.run(()=>{re(m,()=>{ue(m)&&(y.value=m.value)},{immediate:ue(m)})})}})}].forEach(c=>c())}),()=>o.stop()};const Ac={name:"VueFlow"},kd=le(ee(A({},Ac),{props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:null,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultZoom:null,defaultPosition:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=zt(o,"modelValue",n),r=zt(o,"nodes",n),l=zt(o,"edges",n),m=ae({id:o.id}),{vueFlowRef:a,id:s,hooks:u,getNodeTypes:d,getEdgeTypes:h,$reset:v}=m,w=ln(m,["vueFlowRef","id","hooks","getNodeTypes","getEdgeTypes","$reset"]),c=Dc({modelValue:i,nodes:r,edges:l},o,A({vueFlowRef:a,id:s,hooks:u,getNodeTypes:d,getEdgeTypes:h,$reset:v},w)),g=te();return qi(()=>{c()}),$e(()=>{a.value=g.value}),mu(n,u),We(on,Ki()),t(A({vueFlowRef:a,id:s,hooks:u,getNodeTypes:d,getEdgeTypes:h,$reset:v},w)),(y,T)=>(G(),K("div",{ref_key:"el",ref:g,class:"vue-flow"},[ce(Ic,null,{nodes:Ee(()=>[(G(!0),K(we,null,Ae(Object.keys(Z(d)),S=>ne(y.$slots,`node-${S}`)),256))]),edges:Ee(()=>[(G(!0),K(we,null,Ae(Object.keys(Z(h)),S=>ne(y.$slots,`edge-${S}`)),256))]),"connection-name":Ee(()=>[ne(y.$slots,"connection-line")]),default:Ee(()=>[ne(y.$slots,"zoom-pane")]),_:3}),ne(y.$slots,"default")],512))}})),qn=function({position:{x:e,y:t},dimensions:{height:n,width:o},strokeWidth:i,strokeColor:r,borderRadius:l,color:a,shapeRendering:s="geometricPrecision"},{attrs:u,emit:d,slots:h}){var v,w;const c=(v=u.style)!=null?v:{};return[oe("rect",{class:["vue-flow__minimap-node",u.class].join(" "),style:c,x:e,y:t,rx:l,ry:l,width:o,height:n,fill:a||c.background||c.backgroundColor,stroke:r,strokeWidth:i,shapeRendering:s,onClick:g=>d("click",g),onDblClick:g=>d("dblclick",g),onMouseenter:g=>d("mouseenter",g),onMousemove:g=>d("mousemove",g),onMouseleave:g=>d("mouseleave",g)}),(w=h==null?void 0:h.default)==null?void 0:w.call(h)]};qn.props=["position","dimensions","strokeWidth","strokeColor","borderRadius","color","shapeRendering"];qn.emits=["click","dblclick","mouseenter","mousemove","mouseleave"];const Rc=["width","height","viewBox"],Hc=["d","fill"],Vc={name:"MiniMap"},$d=le(ee(A({},Vc),{props:{nodeColor:{type:[String,Function],default:"#fff"},nodeStrokeColor:{type:[String,Function],default:"#555"},nodeClassName:null,nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 242, 243, 0.7)"},width:null,height:null},emits:["nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Qi(),o=tt(),i=200,r=150,l=ae(),a=b(l,"edges"),s=b(l,"viewport"),u=b(l,"dimensions"),d=b(l,"emits"),h=b(l,"getNodes"),v=Q(()=>{var U,q,D;return(D=(q=e.width)!=null?q:(U=n.style)==null?void 0:U.width)!=null?D:i}),w=Q(()=>{var U,q,D;return(D=(q=e.height)!=null?q:(U=n.style)==null?void 0:U.height)!=null?D:r}),c=e.nodeColor instanceof Function?e.nodeColor:()=>e.nodeColor,g=e.nodeStrokeColor instanceof Function?e.nodeStrokeColor:()=>e.nodeStrokeColor,m=e.nodeClassName instanceof Function?e.nodeClassName:()=>e.nodeClassName,y=typeof o=="undefined"||!!o.chrome?"crispEdges":"geometricPrecision",T=Q(()=>Ln(h.value)),S=Q(()=>({x:-s.value.x/s.value.zoom,y:-s.value.y/s.value.zoom,width:u.value.width/s.value.zoom,height:u.value.height/s.value.zoom})),p=At(S,()=>{const U=h.value&&h.value.length?yu(T.value,S.value):S.value,q=U.width/v.value,D=U.height/w.value,f=Math.max(q,D),E=f*v.value,_=f*w.value,z=5*f;return{offset:z,x:U.x-(E-U.width)/2-z,y:U.y-(_-U.height)/2-z,width:E+z*2,height:_+z*2}}),C=At(p,()=>p.value.x&&p.value.y?`
    M${p.value.x-p.value.offset},${p.value.y-p.value.offset}
    h${p.value.width+p.value.offset*2}
    v${p.value.height+p.value.offset*2}
    h${-p.value.width-p.value.offset*2}z
    M${S.value.x},${S.value.y}
    h${S.value.width}
    v${S.value.height}
    h${-S.value.width}z`:""),M=(U,q)=>{const D={event:U,node:q,connectedEdges:de([q],a.value)};d.value.miniMapNodeClick(D),t("nodeClick",D)},P=(U,q)=>{const D={event:U,node:q,connectedEdges:de([q],a.value)};d.value.miniMapNodeDoubleClick(D),t("nodeDblclick",D)},I=(U,q)=>{const D={event:U,node:q,connectedEdges:de([q],a.value)};d.value.miniMapNodeMouseEnter(D),t("nodeMouseenter",D)},L=(U,q)=>{const D={event:U,node:q,connectedEdges:de([q],a.value)};d.value.miniMapNodeMouseMove(D),t("nodeMousemove",D)},W=(U,q)=>{const D={event:U,node:q,connectedEdges:de([q],a.value)};d.value.miniMapNodeMouseLeave(D),t("nodeMouseleave",D)};return(U,q)=>(G(),K("svg",{width:v.value,height:w.value,viewBox:[p.value.x,p.value.y,p.value.width,p.value.height].join(" "),class:"vue-flow__minimap"},[(G(!0),K(we,null,Ae(h.value,D=>(G(),ge(Z(qn),{id:D.id,key:D.id,position:D.computedPosition,dimensions:D.dimensions,style:me(D.style),class:Re(Z(m)(D)),color:Z(c)(D),"border-radius":e.nodeBorderRadius,"stroke-color":Z(g)(D),"stroke-width":e.nodeStrokeWidth,"shape-rendering":Z(y),onClick:f=>M(f,D),onDblclick:f=>P(f,D),onMouseenter:f=>I(f,D),onMousemove:f=>L(f,D),onMouseleave:f=>W(f,D)},{default:Ee(()=>[ne(U.$slots,`node-${D.type}`,{id:D.id,parentNode:D.parentNode,selected:D.selected,position:D.computedPosition,dimensions:D.dimensions,style:me(D.style),class:Re(Z(m)(D)),color:Z(c)(D),borderRadius:e.nodeBorderRadius,strokeColor:Z(g)(D),strokeWidth:e.nodeStrokeWidth,shapeRendering:Z(y)})]),_:2},1032,["id","position","dimensions","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),ve("path",{class:"vue-flow__minimap-mask",d:Z(C),fill:e.maskColor,"fill-rule":"evenodd"},null,8,Hc)],8,Rc))}}));var Lc=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const Fc={name:"ControlButton"},Zc={class:"vue-flow__controls-button"};function Uc(e,t,n,o,i,r){return G(),K("button",Zc,[ne(e.$slots,"default")])}var Ct=Lc(Fc,[["render",Uc]]);const Xc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Yc=ve("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Gc=[Yc];function Wc(e,t){return G(),K("svg",Xc,Gc)}var qc={render:Wc};const Kc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Qc=ve("path",{d:"M0 0h32v4.2H0z"},null,-1),jc=[Qc];function Jc(e,t){return G(),K("svg",Kc,jc)}var ed={render:Jc};const td={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},nd=ve("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),od=[nd];function id(e,t){return G(),K("svg",td,od)}var rd={render:id};const ld={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ad=ve("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),sd=[ad];function ud(e,t){return G(),K("svg",ld,sd)}var cd={render:ud};const dd={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fd=ve("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),hd=[fd];function vd(e,t){return G(),K("svg",dd,hd)}var gd={render:vd};const md={class:"vue-flow__controls"},pd={name:"Controls"},Cd=le(ee(A({},pd),{props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=ae(),o=b(n,"nodesDraggable"),i=b(n,"nodesConnectable"),r=b(n,"elementsSelectable"),l=b(n,"setInteractive"),a=b(n,"zoomIn"),s=b(n,"zoomOut"),u=b(n,"fitView"),d=Q(()=>o.value&&i.value&&r.value),h=()=>{a.value(),t("zoomIn")},v=()=>{s.value(),t("zoomOut")},w=()=>{u.value(e.fitViewParams),t("fitView")},c=()=>{l.value(!d.value),t("interactionChange",!d.value)};return(g,m)=>(G(),K("div",md,[ne(g.$slots,"top"),e.showZoom?(G(),K(we,{key:0},[ne(g.$slots,"control-zoom-in",{},()=>[ce(Ct,{class:"vue-flow__controls-zoomin",onClick:h},{default:Ee(()=>[ne(g.$slots,"icon-zoom-in",{},()=>[ce(Z(qc))])]),_:3})]),ne(g.$slots,"control-zoom-out",{},()=>[ce(Ct,{class:"vue-flow__controls-zoomout",onClick:v},{default:Ee(()=>[ne(g.$slots,"icon-zoom-out",{},()=>[ce(Z(ed))])]),_:3})])],64)):se("",!0),e.showFitView?ne(g.$slots,"control-fit-view",{key:1},()=>[ce(Ct,{class:"vue-flow__controls-fitview",onClick:w},{default:Ee(()=>[ne(g.$slots,"icon-fit-view",{},()=>[ce(Z(rd))])]),_:3})]):se("",!0),e.showInteractive?ne(g.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(G(),ge(Ct,{key:0,class:"vue-flow__controls-interactive",onClick:c},{default:Ee(()=>[Z(d)?ne(g.$slots,"icon-unlock",{key:0},()=>[ce(Z(gd))]):se("",!0),Z(d)?se("",!0):ne(g.$slots,"icon-lock",{key:1},()=>[ce(Z(cd))])]),_:3})):se("",!0)]):se("",!0),ne(g.$slots,"default")]))}})),yd=["x","y","width","height"],wd=["stroke","stroke-width","d"],_d=["cx","cy","r","fill"],xd={key:2,height:"100",width:"100"},bd=["fill"],Nd=["x","y","fill"],Ed={name:"Background"},zd=le(ee(A({},Ed),{props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},n=ae(),o=b(n,"viewport"),i=Q(()=>{const s=e.gap&&e.gap*o.value.zoom,u=s&&o.value.x%s,d=s&&o.value.y%s,h=e.size*o.value.zoom;return{scaledGap:s,xOffset:u,yOffset:d,size:h}}),r=`pattern-${Math.floor(Math.random()*1e5)}`,l=Q(()=>e.patternColor||t[e.variant||"dots"]),a=Q(()=>`M${i.value.scaledGap/2} 0 V${i.value.scaledGap} M0 ${i.value.scaledGap/2} H${i.value.scaledGap}`);return(s,u)=>(G(),K("svg",{class:"vue-flow__background",style:me({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[ne(s.$slots,"pattern-container",{id:r},()=>[ve("pattern",{id:r,x:i.value.xOffset,y:i.value.yOffset,width:i.value.scaledGap,height:i.value.scaledGap,patternUnits:"userSpaceOnUse"},[ne(s.$slots,"pattern",{},()=>[e.variant==="lines"?(G(),K("path",{key:0,stroke:Z(l),"stroke-width":e.size,d:Z(a)},null,8,wd)):e.variant==="dots"?(G(),K("circle",{key:1,cx:i.value.size,cy:i.value.size,r:i.value.size,fill:Z(l)},null,8,_d)):se("",!0),e.bgColor?(G(),K("svg",xd,[ve("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,bd)])):se("",!0)])],8,yd)]),ve("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${r})`},null,8,Nd),ne(s.$slots,"default",{id:r})],4))}}));export{kd as _,zd as a,$d as b,Cd as c,Oi as i,ae as u};

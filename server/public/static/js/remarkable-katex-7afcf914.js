import{k as A}from"./katex-a0cc4004.js";const v=(k,p)=>{const u="\\",x="$",i=(p||{}).delimiter||x;if(i.length!==1)throw new Error("invalid delimiter");const m=A.exports,d=(r,n)=>m.renderToString(r,{displayMode:n,throwOnError:!1}),b=(r,n,a)=>{let s=!1,e=r.bMarks[n]+r.tShift[n],c=r.eMarks[n];if(e+1>c)return!1;const f=r.src.charAt(e);if(f!==i)return!1;let o=e;e=r.skipChars(e,f);let t=e-o;if(t!==2)return!1;let l=n;for(;++l,!(l>=a||(e=o=r.bMarks[l]+r.tShift[l],c=r.eMarks[l],e<c&&r.tShift[l]<r.blkIndent));)if(r.src.charAt(e)===i&&!(r.tShift[l]-r.blkIndent>=4)&&(e=r.skipChars(e,f),!(e-o<t)&&(e=r.skipSpaces(e),!(e<c)))){s=!0;break}t=r.tShift[n],r.line=l+(s?1:0);const h=r.getLines(n+1,l,t,!0).replace(/[ \n]+/g," ").trim();return r.tokens.push({type:"katex",params:null,content:h,lines:[n,r.line],level:r.level,block:!0}),!0},g=(r,n)=>{const a=r.pos,s=r.posMax;let e=a;if(r.src.charAt(e)!==i)return!1;for(++e;e<s&&r.src.charAt(e)===i;)++e;const c=r.src.slice(a,e);if(c.length>2)return!1;const f=e;let o=0;for(;e<s;){const t=r.src.charAt(e);if(t==="{"&&(e==0||r.src.charAt(e-1)!=u))o+=1;else if(t==="}"&&(e==0||r.src.charAt(e-1)!=u)){if(o-=1,o<0)return!1}else if(t===i&&o===0){const l=e;let h=e+1;for(;h<s&&r.src.charAt(h)===i;)++h;if(h-l===c.length){if(!n){const S=r.src.slice(f,l).replace(/[ \n]+/g," ").trim();r.push({type:"katex",content:S,block:c.length>1,level:r.level})}return r.pos=h,!0}}e+=1}return n||(r.pending+=c),r.pos+=c.length,!0};k.inline.ruler.push("katex",g,p),k.block.ruler.push("katex",b,p),k.renderer.rules.katex=(r,n)=>d(r[n].content,r[n].block),k.renderer.rules.katex.delimiter=i};var E=v;export{E as r};
